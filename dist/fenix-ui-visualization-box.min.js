define(["loglevel","underscore","underscore.string","jquery","fenix-ui-pivotator-utils","fenix-ui-filter-utils","fenix-ui-metadata-viewer","fenix-ui-dropdown","fenix-ui-bridge","fenix-ui-reports","swiper","amplify-pubsub","fenix-ui-filter","fenix-ui-chart-creator","bootstrap","fenix-ui-map-creator","fenix-ui-table-creator"],function(t,e,a,n,i,o,r,s,l,u,c,d,h,p,b,_,f){return function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){var n,i;n=[a(22),a(29),a(23),a(24),a(25),a(26),a(27),a(28),a(34),a(35),a(36),a(37),a(38),a(39),a(40),a(41),a(2),a(42),a(43),a(44),a(31),a(45),a(46),a(47),a(48)],i=function(t,e,n,i,o,r,s,l,u,c,d,h,p,b,_,f,g,m,v,y,S,T,x,w,E){"use strict";function R(n){t.info("Create box"),t.info(n),a(49),a(57),e.extend(!0,this,o,{initial:n||{},$el:e(n.el)});var i=this._validateInput();return i===!0?(this._initState(),this._initVariables(),this._initObj(),this._setStatus("loading"),this._renderMenu(),this._bindEventListeners(),this._initTabSources(),this.valid=!0,this._getModelInfo(),this._reactToModelStatus(),this):(this.valid=!1,t.error("Impossible to create visualization box"),t.error(i),this._setObjState("error",i),void 0)}var L={filter:_,map:f,metadata:g},O={BOX:"[data-role='box']",CONTENT_READY:"[data-content='ready']",RIGHT_MENU:"[data-role='right-menu']",FLIP_CONTAINER:"[data-role='flip-container']",FLIP_BUTTONS:"[data-action='flip']",FRONT_CONTENT:"[data-role='front-content']",FRONT_TOOLBAR:"[data-role='front-toolbar']",BACK_TOOLBAR:"[data-role='back-toolbar']",PROCESS_STEPS:"[data-role='process-steps']",PROCESS_DETAILS:"[data-role='process-details']",BACK_CONTENT:"[data-role='back-content']",BOX_TITLE:"[data-role='box-title']",QUERY_BUTTON:"[data-action='query']",ERROR_TEXT:"[data-role='error-text']",EMPTY_FILTER_BUTTON:"[data-content='empty'] [data-action='filter'], [data-content='error'] [data-action='filter']",BACK_FILTER_ERRORS:"[data-role='filter-error']",FILTER_AGGREGATION_TEMPLATE:"[data-role='filter-aggregation-template']",FILTER_FILTER_TEMPLATE:"[data-role='filter-filter-template']",FILTER_MAP_TEMPLATE:"[data-role='filter-map-template']",ROWS_SWIPER:"[data-role='filter-rows-swiper']",BTN_SIDEBAR:"[data-action='show-back-sidebar']",SIDEBAR:"[data-role='back-sidebar']",FRONT_FACE:"[data-face='front']",BACK_FACE:"[data-face='back']",OTHER_CONTENT:"[data-content='empty'], [data-content='error'], [data-content='huge']"},C="./tabs/";return R.prototype.render=function(a){t.info("Render model for box ["+this.id+"]:"),t.info(a),e.extend(!0,this,a),this._reactToModelStatus()},R.prototype.dispose=function(){this._dispose(),t.info("Box ["+this.id+"] disposed")},R.prototype.setStatus=function(t){this._setStatus(t)},R.prototype.showTab=function(t,e){this._showFrontTab(t,e)},R.prototype.setSize=function(t){this._setSize(t)},R.prototype.flip=function(t){return this._flip(t)},R.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},R.prototype.getState=function(){return this.state},R.prototype._validateInput=function(){var e=!0,a=[];return this.id||(window.fx_vis_box_id>=0?window.fx_vis_box_id++:window.fx_vis_box_id=0,this.id="fx-box-"+window.fx_vis_box_id,this._setObjState("id",this.id),t.info("Set box id: "+this.id)),0===this.$el.length&&(a.push({code:r.MISSING_CONTAINER}),t.warn("Impossible to find box container")),a.length>0?a:e},R.prototype._initVariables=function(){this.front_tab_instances={},this.back_tab_instances={},this.bridge=new T({environment:this._getObjState("environment"),cache:this._getObjState("cache")}),this.report=new x({environment:this._getObjState("environment"),cache:this._getObjState("cache")})},R.prototype._initObj=function(){var t=e(d(e.extend(!0,{},this.getState(),S[this._getObjState("lang").toLowerCase()])));this.$el.html(t),this.channels={},this.hasMenu=this.$el.find(O.RIGHT_MENU).length>0,this.flip(this._getObjState("face")),this.$processSteps=this.$el.find(O.PROCESS_STEPS),this.$processStepDetails=this.$el.find(O.PROCESS_DETAILS),this.$boxTitle=this.$el.find(O.BOX_TITLE)},R.prototype._initState=function(){var t=this.initial.lang||o.lang;t=t.toLowerCase(),this._setObjState("lang",t),this._setObjState("hideToolbar",!!this.initial.hideToolbar),this._setObjState("hideMenu",!!this.initial.hideMenu),this._setObjState("hideMetadataButton",!!this.initial.hideMetadataButton),this._setObjState("hideRemoveButton",!!this.initial.hideRemoveButton),this._setObjState("hideDownloadButton",!!this.initial.hideDownloadButton),this._setObjState("hideCloneButton",!!this.initial.hideCloneButton),this._setObjState("hideFlipButton",!!this.initial.hideFlipButton),this._setObjState("hideMinimizeButton",!!this.initial.hideMinimizeButton),this._setObjState("tabStates",this.initial.tabStates||{}),this._setObjState("tabOptions",this.initial.tabOptions||{}),this._setObjState("tab",this.initial.tab),this._setObjState("face",this.initial.face||o.face),this._setObjState("faces",this.initial.faces||o.faces),this._setObjState("model",this.initial.model),this._setObjState("version",this.initial.version?this.initial.version:void 0),this._setObjState("values",this.initial.values),this._setObjState("process",this.initial.process||[]),this._setObjState("uid",this.initial.uid||l.getNestedProperty("metadata.uid",this._getObjState("model"))),this._setObjState("size",this.initial.size||o.size),this._setObjState("status",this.initial.status||o.status),this._setObjState("environment",this.initial.environment),this._setObjState("maxDataSize",this.initial.maxDataSize||o.maxDataSize),this._setObjState("minDataSize",this.initial.minDataSize||o.minDataSize),this._setObjState("cache","boolean"==typeof this.initial.cache?this.initial.cache:o.cache),this._setObjState("backFilter",this.initial.backFilter),this._setObjState("backMap",this.initial.backMap);var a=e.extend(!0,this.initial.loadResourceServiceQueryParams||o.loadResourceServiceQueryParams,{language:"EN"!==this._getObjState("lang").toUpperCase()?"EN,"+this._getObjState("lang").toUpperCase():"EN"});this._setObjState("loadResourceServiceQueryParams",a),this._setObjState("menuModel",this.initial.menu||v),this._setObjState("title",this.initial.title||this._getModelTitle),this._setObjState("showFilter","boolean"==typeof this.initial.showFilter&&this.initial.showFilter)},R.prototype._setObjState=function(t,e){return l.assign(this.state,t,e),e},R.prototype._getObjState=function(t){return l.getNestedProperty(t,this.getState())},R.prototype._reactToModelStatus=function(e){t.info("React to model status: "),t.info(e),this._setObjState("error",null);var a=e||this._getModelStatus();switch(t.info("Status found: "),t.info(a),a){case"ready":this._getModelInfo(),this._renderBox();break;case"empty":this.setStatus("empty");break;case"huge":this.setStatus("huge");break;case"no_model":this.setStatus("loading");break;case"to_load":this._loadResource().then(n.bind(this._onLoadResourceSuccess,this),n.bind(this._onLoadResourceError,this));break;case"missing_metadata":this._loadResourceMetadata().then(n.bind(this._loadResourceMetadataSuccess,this),n.bind(this._loadResourceMetadataError,this));break;case"to_filter":this._forceModelFilter();break;default:this.setStatus("error")}},R.prototype._getModelStatus=function(){var t=(this._getObjState("uid"),this._getObjState("process"),this._getObjState("version"),this._getObjState("model")),e=this._getObjState("model.metadata"),a=this._getObjState("resourceRepresentationType");if(n.isEmpty(e))return"missing_metadata";if("dataset"===a&&t){if("object"!=typeof t)return"error";if(!t.size||0===t.size)return"empty";if(!Array.isArray(t.data))return"to_filter";if(Array.isArray(t.data)&&t.data.length<=this._getObjState("minDataSize"))return"empty";if(t.size>this._getObjState("maxDataSize"))return"huge";if(Array.isArray(t.data)&&t.data.length>0)return"ready"}if("geographic"===a){var i=this._getObjState("model.metadata.dsd"),o=i.workspace,s=i.layerName;if(o&&s)return"ready"}return this._setObjState("error",{code:r.RESOURCE_STATUS}),"error"},R.prototype._loadResource=function(a){t.info("Loading FENIX resource"),this.setStatus("loading"),this._setObjState("showFilter",!0);var n=this._getObjState("loadResourceServiceQueryParams"),i=Array.isArray(a)?a:[];return this._setObjState("process",i.slice(0)),this.bridge.getProcessedResource({body:i,uid:this._getObjState("uid"),version:this._getObjState("version"),params:e.extend(!0,{},n)})},R.prototype._onLoadResourceError=function(e){t.error("Impossible to load resource"),t.error(e),t.error({code:r.LOAD_RESOURCE}),this._setObjState("error",{code:r.LOAD_RESOURCE,filter:!0}),this._setStatus("error")},R.prototype._onLoadResourceSuccess=function(e){t.info("Load resource success"),this._disposeBoxFaces(),this._updateModel(e),this._getModelInfo(),this.setStatus("ready"),this._reactToModelStatus()},R.prototype._updateModel=function(t){var e=this._getObjState("model")||{},a=l.getNestedProperty("metadata",t),i=l.getNestedProperty("dsd",a)||{},o=l.getNestedProperty("data",t),r=l.getNestedProperty("size",t),s=n.without(Object.keys(i),"rid");s.length>0&&l.assign(e,"metadata.dsd",i),Array.isArray(o)&&l.assign(e,"data",o),e.size!==r&&l.assign(e,"size",r),this._setObjState("model",e)},R.prototype._loadResourceMetadata=function(){t.info("Loading FENIX resource metadata"),this.setStatus("loading");var a=this._getObjState("loadResourceServiceQueryParams");return this.bridge.getMetadata({uid:this._getObjState("uid"),version:this._getObjState("version"),params:e.extend(a,{dsd:!0,full:!0})})},R.prototype._loadResourceMetadataError=function(){t.error("Impossible to load resource"),t.error({code:r.LOAD_METADATA}),this._setObjState("error",{code:r.LOAD_METADATA}),this._setStatus("error")},R.prototype._loadResourceMetadataSuccess=function(e){t.info("Load resource metadata success"),t.info(e),this._setObjState("model",{metadata:e}),this._checkResourceType()},R.prototype._checkResourceType=function(){t.info("Check Resource type"),this._getModelInfo();var e=this._getObjState("resourceRepresentationType");switch(t.info("Check resource type: "+e),e){case"dataset":var a=l.getNestedProperty("metadata.dsd.datasources",this._getObjState("model"));n.isArray(a)&&a.length>0?this._getObjState("process").length>0?(t.info("Process present. Load resource instead of fetch()"),this._loadResource(this._getObjState("process")).then(n.bind(this._onLoadResourceSuccess,this),n.bind(this._onLoadResourceError,this))):this._fetchResource().then(n.bind(this._fetchResourceSuccess,this),n.bind(this._fetchResourceError,this)):(t.error({code:r.UNKNOWN_RESOURCE_TYPE}),this._setObjState("error",{code:r.MISSING_DATASOURCES}),this._setStatus("error"));break;case"geographic":this.setStatus("ready"),this._reactToModelStatus();break;default:t.error({code:r.UNKNOWN_RESOURCE_TYPE}),this._setObjState("error",{code:r.UNKNOWN_RESOURCE_TYPE}),this._setStatus("error")}},R.prototype._fetchResource=function(){return t.info("Fetching FENIX resource"),this.setStatus("loading"),this._setObjState("showFilter",!1),this.bridge.getResource({body:[],uid:this._getObjState("uid"),version:this._getObjState("version"),params:e.extend(!0,{},{perPage:1})})},R.prototype._fetchResourceError=function(e){t.error("Impossible to fetch resource"),t.error(e),t.error({code:r.FETCH_RESOURCE}),this._setObjState("error",{code:r.FETCH_RESOURCE}),this._setStatus("error")},R.prototype._fetchResourceSuccess=function(e){t.info("Fetch resource success"),this._updateModel(e),this._checkModelSize()},R.prototype._checkModelSize=function(){var t=this._getModelStatus();switch(t.toLowerCase()){case"ready":this._reactToModelStatus("to_load");break;default:this._reactToModelStatus(t)}},R.prototype._getModelInfo=function(){var e=this._getObjState("model.metadata.meContent.resourceRepresentationType")||"",a=e.toLowerCase();t.info("Resource type is: "),t.info(a),this._setObjState("resourceRepresentationType",a)},R.prototype._renderBox=function(){t.info("Render box start:"),this._setStatus("ready"),this._renderBoxFaces()},R.prototype._initTabSources=function(){var a=e.extend(!0,{},this.pluginRegistry),i=this.tabs,o=Object.keys(i),r=[];n.each(o,n.bind(function(n){var o=a[n];o||t.error('Registration not found for "'+n+' tab".'),e.isPlainObject(i[n])||this._setObjState("tabs."+n,{}),this._setObjState("tabs."+n+".suitable",!1),o.path?r.push(o.path):t.error('Impossible to find path configuration for "'+n+' tab".')},this)),t.info("Tab paths found: "),t.info(r)},R.prototype._renderBoxFaces=function(){t.info("Render box faces"),this._updateBoxTitle(),this._renderFrontFace(),this._renderBackFace()},R.prototype._updateBoxTitle=function(){var t=this._getObjState("title"),e="function"==typeof t?t.call(this,this._getObjState("model")):t;this.computed&&(e+=S[this._getObjState("lang")].computed_resource),this.$boxTitle.html(e)},R.prototype._getModelTitle=function(t){var e=l.getNestedProperty("metadata.title",t),a=l.getNestedProperty("metadata.uid",t);return this._getI18nLabel(e)||a},R.prototype._getI18nLabel=function(t){if("object"!=typeof t)return"";var e=this.langFallbackOrder.slice(0),a="Missing label";e.unshift(this._getObjState("lang")),e=n.uniq(e);for(var i=0;i<e.length&&!(a=t[e[i]]);i++);return a},R.prototype._validateValues=function(t){this._hideFilterError();var e=!0,a=this._getObjState("model"),i=l.getNestedProperty("metadata.dsd.columns",a)||[],o=l.cleanArray(i.map(function(t){if(t.key===!0)return t.id})),s=[],u=l.getNestedProperty("aggregations.values.aggregations",t)||[],c=l.getNestedProperty("filter.values",t)||{},d=Object.keys(c)||[],h=n.findWhere(i,{subject:"value"})||{},p=h.id,b=n.where(u,{parent:"sum"}).map(function(t){return t.value}),_=n.where(u,{parent:"avg"}).map(function(t){return t.value}),f=n.where(u,{parent:"first"}).map(function(t){return t.value}),g=n.where(u,{parent:"last"}).map(function(t){return t.value}),m=n.where(u,{parent:"group"}).map(function(t){return t.value}),v=parseInt(b.length,10),y=parseInt(_.length,10),S=parseInt(f.length,10),T=parseInt(g.length,10),x=parseInt(m.length,10),w=v+y+S+T;if(n.each(b,function(t){var e=n.findWhere(i,{id:t})||{},a=e.dataType;"number"!==a&&s.push({code:r.NO_NUMBER_DATATYPE,value:t,label:n.findWhere(u,{value:t}).label})}),n.each(_,function(t){var e=n.findWhere(i,{id:t})||{},a=e.dataType;"number"!==a&&s.push({code:r.NO_NUMBER_DATATYPE,value:t,label:n.findWhere(u,{value:t}).label})}),n.contains(m,p)){var E=n.findWhere(u,{value:p});s.push({code:r.VALUE_IN_GROUP_BY,value:E.value,label:E.label})}if(w>0&&0===x&&s.push({code:r.MISSING_GROUP_BY}),x>0){var R=n.contains(b,p)||n.contains(_,p)||n.contains(f,p)||n.contains(g,p);R||s.push({code:r.MISSING_VALUE_IN_AGGREGATION_RULES})}var L=n.difference(o,d);if(d.length>0&&L.length>0){var O=n.map(L,n.bind(function(t){return n.findWhere(i,{id:t}).title[this._getObjState("lang")]},this));s.push({code:r.EXCLUDE_KEY_DIMENSION,value:O,label:O.join(", ")})}return s.length>0?s:e},R.prototype._createQuery=function(e){function a(e){var a={name:"filter",parameters:{}},i=!1,o=Object.keys(l.getNestedProperty("filter.values",e)||{}),r=e.rows||{},u=l.getNestedProperty("metadata.dsd.columns",s._getObjState("model"))||[],c=u.filter(function(t){return!t.id.endsWith("_"+s._getObjState("lang").toUpperCase())&&!t.id.endsWith("_EN")}).map(function(t){return t.id}).sort(),d=n.findWhere(u,{subject:"value"});return Object.getOwnPropertyNames(r).length>0?(a.parameters.rows=r,i=!0):t.warn("Filter.rows not included"),o.length>0&&!n.contains(o,d.id)&&o.push(d.id),o=o.sort(),o.length>0&&!n.isEqual(c,o)?(a.parameters.columns=o,i=!0):t.warn("Filter.columns not included"),i?a:null}function i(t){if(t.aggregations){var e={name:"group",parameters:{}},a=!1,i=l.getNestedProperty("aggregations.values.aggregations",t),o=[],r=[],s=[],u=[],c=[],d=[];return n.each(i,function(t){switch(t.parent.toLowerCase()){case"group":o.push(t.value);break;case"sum":r.push(t.value);break;case"avg":s.push(t.value);break;case"first":u.push(t.value);break;case"last":c.push(t.value)}}),r=l.cleanArray(r).map(function(t){return{columns:[t],rule:"SUM"}}),s=l.cleanArray(s).map(function(t){return{columns:[t],rule:"AVG"}}),u=l.cleanArray(u).map(function(t){return{columns:[t],rule:"FIRST"}}),c=l.cleanArray(c).map(function(t){return{columns:[t],rule:"LAST"}}),o.length>0&&(e.parameters.by=l.cleanArray(o),a=!0),n.each([r,s,u,c],function(t){t.length>0&&(d=n.uniq(n.union(d,t),!1))}),d.length>0&&(e.parameters.aggregations=d,a=!0),a?e:null}}var o,r,s=this,u=[],c=!1;return o=a(e),r=i(e),o&&(c=!0,u.push(o)),r&&(c=!0,u.push(r)),this.computed=c,u},R.prototype._renderFrontFace=function(){t.info("Start rendering box front face");var e=this._getObjState("faces");return n.contains(e,"front")&&this.frontFaceIsRendered!==!0?(this.frontFaceIsRendered=!0,this._checkSuitableTabs(),"dataset"===this._getObjState("resourceRepresentationType")?this._showMenuItem("download"):t.warn("Download menu item not show because resource is not 'dataset'"),void this._showDefaultFrontTab()):void t.warn("Abort 'front' face rendering. face is already rendered: "+this.frontFaceIsRendered+", config render face: "+n.contains(e,"front"))},R.prototype._bindFrameEventListeners=function(){var a=this;this.$el.find(O.FRONT_FACE).find("[data-action]").each(function(){var n=e(this),i=n.data("action"),o=a._getEventTopic(i);n.on("click",{event:o,box:a},function(e){e.preventDefault(),t.info("Raise event: "+e.data.event),E.publish(o,{target:this,box:e.data.box,state:a.getState()})})})},R.prototype._showFrontTab=function(e,a,i){t.info("Show tab "+e),t.info(a);var o=this.tabs;if(!o[e])return t.error("Error on show tab content: ",e),t.error({code:r.MISSING_TAB}),this._setObjState("error",{code:r.MISSING_TAB}),void this._setStatus("error");var s=this._getObjState("tab"),u=this._getObjState("tabOptions")[s];return!i&&s===e&&n.isEqual(u,a)?void t.info("Aborting show tab current tab is equal to selected one"):this._getObjState("tabs."+e+".suitable")!==!0?void t.error("Aborting show tab because selected tab is not suitable with current model"):(t.info("Show '"+e+"' tab for result id: "+this.id),a||(a=l.getNestedProperty("options",this.tabs[e])),this._setObjState("tab",e),this._setObjState("tabOptions."+e,a),this.$el.find(O.CONTENT_READY).attr("data-tab",this._getObjState("tab")),void this._showTabContent())},R.prototype._showTabContent=function(){var e=this.tabs,a=this._getObjState("tab");return e[a]?(this._setObjState("tabs."+a+".initialized",!0),void this._callTabInstanceMethod({tab:a,method:"show",opt1:this._getObjState("tabOptions")[a]})):(t.error("Error on show tab content: "+a),t.error({code:r.MISSING_TAB}),this._setObjState("error",{code:r.MISSING_TAB}),void this._setStatus("error"))},R.prototype._createTabInstance=function(t){var i,r=this._getObjState("tabStates."+t)||{},s=e.extend(!0,{},this._getObjState("model")),l=this.pluginRegistry,u=this._getObjState("lang")||o.lang,c=a(59)(this._getPluginPath(l[t])+".js"),d=e.extend(!0,{},r,{el:this._getTabContainer(t),box:this,lang:u,model:s,id:t+"_"+this.id,environment:this._getObjState("environment"),cache:this._getObjState("cache")});return i=new c(d),i.on("filter",n.bind(this._onTabToolbarChangeEvent,this)),i.on("state",n.bind(this._onTabStateChangeEvent,this,t)),this.front_tab_instances[t]=i,i},R.prototype._getTabInstance=function(t,e){return"back"===e?this.back_tab_instances[t]:this.front_tab_instances[t]},R.prototype._getTabContainer=function(t){var a=this.$el.find(O.FRONT_CONTENT).find("[data-section='"+t+"']");return 0===a.length&&(a=e('<div data-section="'+t+'"></div>'),this.$el.find(O.FRONT_CONTENT).append(a)),a},R.prototype._checkSuitableTabs=function(){var e=this.pluginRegistry,a=Object.keys(this.tabs);n.each(a,n.bind(function(a){var n=e[a];n||t.error('Registration not found for "'+a+' tab".'),n.path?(this._createTabInstance(a),this._setObjState("tabs."+a+".suitable",this._callTabInstanceMethod({tab:a,method:"isSuitable"})),t.info(a+" tab is suitable? ",this._callTabInstanceMethod({tab:a,method:"isSuitable"})),this._getObjState("tabs."+a+".suitable")===!0?this._showMenuItem(a):this._hideMenuItem(a)):t.error('Impossible to find path configuration for "'+a+' tab".')},this)),this._syncFrontTabs()},R.prototype._showDefaultFrontTab=function(){var e=this._getObjState("tab")||o.tab,a=this._getObjState("tabs."+e+".suitable"),i=this._getObjState("tabOptions."+e);if(a!==!0){t.warn("Default tab is not suitable. Find first suitable tab to show");var r=Object.keys(this.tabs),s=!1;n.each(r,n.bind(function(t){!s===this._getObjState("tabs."+t+".suitable")==!0&&(e=t)},this))}this._showFrontTab(e,i,!0)},R.prototype._syncFrontTabs=function(){t.info("Send front 'sync' signal");var e=Object.keys(this.tabs);n.each(e,n.bind(function(t){this._getObjState("tabs."+t+".suitable")===!0&&this._callTabInstanceMethod({tab:t,method:"sync",opt1:this._getObjState("sync")||{}})},this))},R.prototype._renderBackFace=function(){t.info("Start rendering box back face");var e=this._getObjState("faces");return n.contains(e,"back")&&this.backFaceIsRendered!==!0?(this.backFaceIsRendered=!0,this._hideFilterError(),this._createProcessSteps(),this._renderProcessSteps(),void this._bindBackFaceEventListeners()):void t.warn("Abort 'front' face rendering. face is already rendered: "+this.backFaceIsRendered+", confing render face: "+n.contains(e,"front"))},R.prototype._bindBackFaceEventListeners=function(){var a=this;this.$el.find(O.BTN_SIDEBAR).on("click",n.bind(function(){this.$el.find(O.SIDEBAR).toggleClass("hidden-xs hidden-sm")},this)),this.$el.find(O.BACK_FACE).find("[data-action]").each(function(){var n=e(this),i=n.data("action"),o=a._getEventTopic(i);n.on("click",{event:o,box:a},function(e){e.preventDefault(),t.info("Raise box event: "+e.data.event),E.publish(o,{target:this,box:e.data.box,state:a.getState()})})})},R.prototype._createProcessSteps=function(){var t,a,n,i;if(t=this._createBackTabConfiguration("filter"),a=this._createBackTabConfiguration("aggregations"),n=this._createBackTabConfiguration("map"),i=e.extend(!0,{},this._getObjState("model")),this.processSteps=[],this._stepControlAccess("metadata")){var o=l.getNestedProperty("metadata.title",i)||{},r=l.getNestedProperty("metadata.uid",i),s=o[this._getObjState("lang")]?o[this._getObjState("lang")]:r;this.processSteps.push({tab:"metadata",id:"metadata",model:i,labels:{title:s}})}this._stepControlAccess("filter")&&this.processSteps.push({id:"filter",tab:"filter",values:t.values,config:t.config,template:t.template,onReady:t.onReady,labels:{title:S[this._getObjState("lang")].step_filter}}),this._stepControlAccess("aggregations")&&this.processSteps.push({id:"aggregations",tab:"filter",values:a.values,config:a.filter,template:a.template,labels:{title:S[this._getObjState("lang")].step_aggregations}})},R.prototype._stepControlAccess=function(t){var e=this._getObjState("resourceRepresentationType");switch(t.toLowerCase()){case"metadata":return!0;case"filter":return"dataset"===e;case"aggregations":return"dataset"===e;case"map":return this._getObjState("tabs.map.suitable");default:return!1}},R.prototype._createBackTabConfiguration=function(t){var e,a=this._getObjState("backFilter")||{},n=this._getObjState("backMap")||{};switch(t.toLowerCase()){case"aggregations":e=this._createBackAggregationTabConfiguration(a[t]);break;case"filter":e=this._createBackFilterTabConfiguration(a[t]);break;case"map":e=this._createBackMapTabConfiguration(n[t]);break;default:e={}}return e},R.prototype._createBackFilterTabConfiguration=function(t){var e,a=this,i=["value"],o=["value"],r=l.getNestedProperty("metadata.dsd.columns",this._getObjState("model"))||[],s=r.filter(function(t){return!n.contains(o,t.subject)}),c=s.filter(function(t){return!n.contains(i,t.id.toLowerCase())}).filter(function(t){return!t.id.endsWith("_"+a._getObjState("lang").toUpperCase())&&!t.id.endsWith("_EN")});e=u.createConfiguration({model:this._getObjState("model"),common:{selector:{hideSummary:!0},template:{hideSwitch:!0,hideHeader:!1}}});var d={};return n.each(e,function(t,e){e.endsWith("_"+a._getObjState("lang").toUpperCase())||e.endsWith("_EN")||(d[e]=t)}),{values:t,config:d,template:h({columns:c}),onReady:n.bind(function(){new w(this.$el.find(O.ROWS_SWIPER),{pagination:this.$el.find(O.ROWS_SWIPER).find(".swiper-pagination"),paginationClickable:!0,nextButton:this.$el.find(O.ROWS_SWIPER).find(".swiper-button-next"),prevButton:this.$el.find(O.ROWS_SWIPER).find(".swiper-button-prev"),slidesPerView:"auto",simulateTouch:!1})},this)}},R.prototype._createBackMapTabConfiguration=function(t){return e.extend(!0,{},{values:t,filter:{layers:{selector:{id:"tree",source:n.map(y,function(t){var e=t.Title.replace("area","").replace("3857","");return{label:i.humanize(e),value:"earthstat:"+t.Name}}),config:{core:{multiple:!0}}},dependencies:{layergroups:{id:"focus",event:"select"}},template:{title:"Select layers to show on map",hideSwitch:!0,hideRemoveButton:!0}}},template:p({layers:[]}),onReady:n.bind(function(t){},this)})},R.prototype._createBackAggregationTabConfiguration=function(t){var a=this._getSourceForAggregationTabConfiguration();return e.extend(!0,{},{values:t,filter:{aggregations:{selector:{id:"sortable",source:a,config:{groups:{dimensions:S[this._getObjState("lang")].aggregations_dimensions,group:S[this._getObjState("lang")].aggregations_group,sum:S[this._getObjState("lang")].aggregations_sum,avg:S[this._getObjState("lang")].aggregations_avg,first:S[this._getObjState("lang")].aggregations_first,last:S[this._getObjState("lang")].aggregations_last}}},template:{hideHeader:!0}}},template:b(S)})},R.prototype._getSourceForAggregationTabConfiguration=function(){var t=[],a=this._getObjState("lang").toUpperCase(),i=l.getNestedProperty("metadata.dsd.columns",this._getObjState("model"));return n.each(i,function(n){var i,o,r,s;n.id.endsWith("_"+a)||n.id.endsWith("_EN")||(i=l.getNestedProperty("title",n),r="object"==typeof i?i:{},s=r[a]||r.EN,s?o=s:(window.fx_vis_box_missing_title>=0?window.fx_vis_box_missing_title++:window.fx_vis_box_missing_title=0,o="Missing dimension title ["+n.id+"]"),t.push(e.extend(!0,{},{value:n.id,parent:"dimensions",label:o})))}),t},R.prototype._renderProcessSteps=function(){function t(){o++,r.length===o&&(this.$el.find(O.BACK_CONTENT).find(O.QUERY_BUTTON).attr("disabled",!1),i._bindStepEventListeners(),i._onBackTabsReady())}var i=this,o=0,r=this.processSteps;n.each(r,n.bind(function(i,o){var r=e(L[i.tab](e.extend(!0,{},i,S,this._getObjState("model"))));this._bindStepLabelEventListeners(r,i),this.$processSteps.append(r);var s=this.pluginRegistry,l=a(59)(this._getPluginPath(s[i.tab])+".js"),u=this.$processStepDetails.find("[data-tab='"+i.id+"']");0===u.length&&(u=e("<li data-tab='"+i.id+"'></li>"),0!==o&&u.hide(),this.$processStepDetails.append(u));var c=new l({el:u,box:this,cache:this._getObjState("cache"),model:e.extend(!0,{},this._getObjState("model")),config:i.config,lang:this._getObjState("lang"),values:i.values||{},id:i.tab+"_"+i.id,labels:i.labels,template:i.template,onReady:i.onReady,environment:this._getObjState("environment")});"function"==typeof i.onReady&&c.on("ready",n.bind(i.onReady,this)),this.back_tab_instances[i.id]=c,t.call(this)},this))},R.prototype._onBackTabsReady=function(){var t=Object.keys(this.back_tab_instances)[0];this._showBackTab(t)},R.prototype._bindStepLabelEventListeners=function(t,e){t.on("click",{step:e},n.bind(function(t){this._showBackTab(t.data.step.id)},this))},R.prototype._showBackTab=function(t){this.$processStepDetails.find(">li").hide(),this.$processStepDetails.find(">li[data-tab='"+t+"']").show(),this.$processSteps.find("[data-tab]").removeClass("active"),this.$processSteps.find("[data-tab='"+t+"']").addClass("active"),this.back_tab_instances[t].show(this._getBackSyncModel())},R.prototype._bindStepEventListeners=function(){var t=this.back_tab_instances.aggregations,e=this.back_tab_instances.filter;t&&e&&(e.on("change",n.bind(this._onBackFilterChangeEvent,this)),t.on("change",n.bind(this._onBackFilterChangeEvent,this)))},R.prototype._onBackFilterChangeEvent=function(){var e=this._getBackFilterValues(),a=this._validateValues(e);return a!==!0?void this._printFilterError(a):(t.warn("Invalid back filter values:"),t.warn(a),void this._syncBackTabs())},R.prototype._getBackSyncModel=function(){function a(e){var a=n.findWhere(d,{value:e}),o=n.findWhere(r,{value:e});return o||!e?void t.info("Not include dimension because already present: "+e):void(a?r.push(a):r.push({value:e,parent:"dimensions",label:n.findWhere(_,{id:e}).title[i._getObjState("lang").toUpperCase()]||n.findWhere(_,{id:e}).title.EN}))}var i=this,o={},r=[],s=this._getBackFilterValues(),u=l.getNestedProperty("metadata.dsd.columns",i._getObjState("model"))||[],c=u.filter(function(t){return!t.id.endsWith("_"+i._getObjState("lang").toUpperCase())}).map(function(t){return t.id}).sort(),d=l.getNestedProperty("aggregations.values.aggregations",s)||[],h=l.getNestedProperty("filter.values",s)||{},p=Object.keys(h).length>0?Object.keys(h):c,b=!e.isEmptyObject(h),_=l.getNestedProperty("metadata.dsd.columns",this._getObjState("model"))||[],f=n.map(_,function(t){return t.id}),g=n.without.apply(n,[f].concat(p)),m=n.findWhere(_,{subject:"value"})||{};if(b===!0||d.length>0?(n.each(d,n.bind(function(t){n.contains(g,t.value)&&m.id!==t.value||a(t.value)},this)),n.each(f,n.bind(function(t){n.contains(g,t)||n.findWhere(r,{value:t})||a(t)},this))):r=this._getSourceForAggregationTabConfiguration(),a(m.id),r.length>0){var v=n.uniq(r,function(t,e,a){return t.value}).filter(function(t){return!t.value.endsWith("_"+i._getObjState("lang").toUpperCase())&&!t.value.endsWith("_EN")});l.assign(o,"values.aggregations",v)}return o},R.prototype._syncBackTabs=function(){var t=this.back_tab_instances.aggregations,e=this._getBackSyncModel();t&&t.setValues(e)},R.prototype._bindEventListeners=function(){var a=this;E.subscribe(this._getEventTopic("remove"),this,this._onRemoveEvent),E.subscribe(this._getEventTopic("resize"),this,this._onResizeEvent),E.subscribe(this._getEventTopic("clone"),this,this._onCloneEvent),E.subscribe(this._getEventTopic("flip"),this,this._onFlipEvent),E.subscribe(this._getEventTopic("metadata"),this,this._onMetadataEvent),E.subscribe(this._getEventTopic("tab"),this,this._onTabEvent),E.subscribe(this._getEventTopic("minimize"),this,this._onMinimizeEvent),E.subscribe(this._getEventTopic("query"),this,this._onQueryEvent),E.subscribe(this._getEventTopic("filter"),this,this._onFilterEvent),E.subscribe(this._getEventTopic("download"),this,this._onDownloadEvent),this.$el.find(O.RIGHT_MENU).on("click","a",function(t){t.preventDefault()}),this.$el.find(O.OTHER_CONTENT).find("[data-action]").each(function(){var n=e(this),i=n.data("action"),o=a._getEventTopic(i);n.on("click",{event:o,box:a},function(e){e.preventDefault(),t.info("Raise box event: "+e.data.event),E.publish(o,{target:this,box:e.data.box,state:a.getState()})})}),this.report.on("export.success",function(){}),this._bindFrameEventListeners()},R.prototype._onRemoveEvent=function(a){t.info("Listen to event: "+this._getEventTopic("remove")),t.info(a);var n=confirm(S[this._getObjState("lang").toLowerCase()].confirm_remove),i=e.extend(!0,{},this.getState());1==n?(E.publish(s.remove,this),this._dispose(),this._trigger("remove",i)):t.info("Abort remove")},R.prototype._onResizeEvent=function(a){t.info("Listen to event: "+this._getEventTopic("resize")),t.info(a);var n;a.target&&e(a.target).data("size")&&(n=e(a.target).data("size"),t.info("Size: "+n),this._setSize(n))},R.prototype._onCloneEvent=function(a){t.info("Listen to event: "+this._getEventTopic("clone")),t.info(a);var n=e.extend(!0,{},this.getState());E.publish(this._getEventTopic("clone",!0),n),this._trigger("clone",n)},R.prototype._onFlipEvent=function(e){t.info("Listen to event: "+this._getEventTopic("flip")),t.info(e),"back"!==this._getObjState("face")?this._flip("back"):this._flip("front"),
t.info("Set box face to: "+this._getObjState("face"))},R.prototype._onMetadataEvent=function(e){t.info("Listen to event: "+this._getEventTopic("metadata")),t.info(e),this.showTab("metadata")},R.prototype._onMinimizeEvent=function(a){t.info("Listen to event: "+this._getEventTopic("minimize")),t.info(a);var n=e.extend(!0,{},this.getState());E.publish(this._getEventTopic("minimize",!0),n),this._trigger("minimize",n),this.dispose()},R.prototype._onTabEvent=function(a){t.info("Listen to event: "+this._getEventTopic("tab")),t.info(a);var n={};n.type=e(a.target).data("type"),this._showFrontTab(e(a.target).data("tab"),n)},R.prototype._onTabToolbarChangeEvent=function(e){n.isEmpty(e.values)?t.warn("Abort sync"):(this._setObjState("sync.toolbar",e),this._syncFrontTabs())},R.prototype._onTabStateChangeEvent=function(t,e){this._setObjState("tabStates."+t,e)},R.prototype._onQueryEvent=function(a){function i(t){var e=!0;return n.each(t,function(t){(!Array.isArray(t)||t.length>0)&&(e=!1)}),e}t.info("Listen to event: "+this._getEventTopic("query")),t.info(a);var o=this._getBackFilterValues(),r=this._validateValues(o),s=this._getBackMapValues(),u=i(l.getNestedProperty("map.values",s));if(r===!0){this._enableFlip();var c=this._createQuery(o)||[];n.isEqual(c,this._getObjState("process"))?t.warn("Abort resource filter because process have not changed"):(this._setObjState("backFilter",e.extend(!0,{},o)),this._setObjState("process",c.slice(0)),t.info("D3P process",c),this._loadResource(c).then(n.bind(this._onLoadResourceSuccess,this),n.bind(this._onLoadResourceError,this))),u||n.isEqual(s,this._getObjState("backMap"))?t.warn("Abort map update because values have not changed"):(this._setObjState("backMap",e.extend(!0,{},s)),this._updateMap()),this._flip("front")}else this._printFilterError(r)},R.prototype._updateMap=function(){if(this._getObjState("tabs.map.suitable")!==!0)return void t.warn("Abort map update because map table is not suitable for current resource");var e=this._getObjState("backMap").map;this._setObjState("sync.map",e),this._syncFrontTabs();var a=this._getObjState("tab");this._showFrontTab(a)},R.prototype._onDownloadEvent=function(a){if(t.info("Listen to event: "+this._getEventTopic("download")),t.info(a),"dataset"!==this._getObjState("resourceRepresentationType"))return void t.warn("Abort download because resource is not 'dataset'");var n=e(a.target).attr("data-target")||"";switch(n.toLocaleLowerCase()){case"data":t.info("Data download"),this._downloadData();break;case"metadata":t.info("Metadata download"),this._downloadMetadata();break;default:t.warn("Unknown download target")}},R.prototype._downloadData=function(){var e={resource:this._getObjState("model"),input:{config:{}},output:{config:{lang:this._getObjState("lang").toUpperCase()}}};t.info("Configure FENIX export: table"),this._getObjState("lang").toUpperCase(),this.computed&&(e.output.config.notes=S[this._getObjState("lang").toLowerCase()].computed_export),t.info(e),this.report.export({format:"table",config:e})},R.prototype._downloadMetadata=function(){var e=this._getObjState("model"),a=l.getNestedProperty("metadata.title",e)||{},n=a[this._getObjState("lang")]?a[this._getObjState("lang")]:"fenix_export",i=l.getNestedProperty("metadata.dsd.contextSystem",e),o="uneca"===i?i:"fao",r={resource:{metadata:{uid:l.getNestedProperty("metadata.uid",e)},data:[]},input:{config:{}},output:{config:{template:o,lang:this._getObjState("lang").toUpperCase(),fileName:n.replace(/[^a-z0-9]/gi,"_")+".pdf"}}};t.info("Configure FENIX export: metadata"),t.info(r),this.report.export({format:"metadata",config:r})},R.prototype._onFilterEvent=function(e){t.info("Listen to event: "+this._getEventTopic("filter")),t.info(e),this._forceModelFilter()},R.prototype._flip=function(t){var e=t||"front";switch(e.toLocaleLowerCase()){case"front":this.$el.find(O.FLIP_CONTAINER).removeClass(o.flippedClassName);break;case"back":this.$el.find(O.FLIP_CONTAINER).addClass(o.flippedClassName)}this._setObjState("face",e)},R.prototype._disableFlip=function(){this.$el.find(O.FLIP_BUTTONS).attr("disabled",!0)},R.prototype._enableFlip=function(){this.$el.find(O.FLIP_BUTTONS).attr("disabled",!1)},R.prototype._printFilterError=function(t){var a=this,i={},o=e("<ul class='list-unstyled'></ul>");n.each(t,function(t){i[t.code]||(i[t.code]=[]),i[t.code].push(t.label)}),n.each(i,function(t,n){o.append(e("<li>"+S[a._getObjState("lang").toLowerCase()][n]+"</li>"))}),this._showFilterError(o)},R.prototype._showFilterError=function(t){this.$el.find(O.BACK_FILTER_ERRORS).html(t).show()},R.prototype._hideFilterError=function(){this.$el.find(O.BACK_FILTER_ERRORS).hide()},R.prototype._getBackFilterValues=function(){var t=this.forceModelFilter===!0?{}:this._getObjState("backFilter")||{},a=this.back_tab_instances.filter?this.back_tab_instances.filter.getValues(null):null,i=this.back_tab_instances.aggregations?this.back_tab_instances.aggregations.getValues(null):null,o=this.back_tab_instances.filter?this.back_tab_instances.filter.getValues("fenix"):null,r={filter:n.isEqual(a,t.filter)?t.filter:a,aggregations:n.isEqual(i,t.aggregations)?t.aggregations:i,rows:n.isEqual(o,t.rows)?t.rows:o};return e.extend(!0,{},r)},R.prototype._getBackMapValues=function(){var t=this._getObjState("backMap")||{},a=this.back_tab_instances.map?this.back_tab_instances.map.getValues(null):null,i={map:n.isEmpty(a)?t:a};return e.extend(!0,{},i)},R.prototype._renderMenu=function(){var a=this;this.hasMenu===!0?this.rightMenu=new m({el:this.$el.find(O.RIGHT_MENU),model:this._getObjState("menuModel").map(function(t){return e.extend(t,{label:S[a._getObjState("lang")]["menu_"+t.id]})})}):t.warn("Menu will not be rendered. Impossible to find container.")},R.prototype._showMenuItem=function(t){this.hasMenu&&this.rightMenu.showItem(t)},R.prototype._hideMenuItem=function(t){this.hasMenu&&this.rightMenu.hideItem(t)},R.prototype._callTabInstanceMethod=function(a){var n=this._getTabInstance(a.tab,a.face);return n&&e.isFunction(n[a.method])?n[a.method](a.opt1,a.opt2):void t.error(a.tab+" tab does not implement the "+a.method+"() fn")},R.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},R.prototype._setStatus=function(e){switch(t.info("Set '"+e+"' status for result id: "+this.id),this._setObjState("status",e),this.$el.find(O.BOX).attr("data-status",this._getObjState("status")),this._getObjState("status").toLowerCase()){case"error":var a=this._getObjState("error");this.$el.find(O.ERROR_TEXT).html(S[this._getObjState("lang")][a.code]?S[this._getObjState("lang")][a.code]:a.code),a.filter===!0?this.$el.find(O.EMPTY_FILTER_BUTTON).show():this.$el.find(O.EMPTY_FILTER_BUTTON).hide();break;case"empty":var n=this.$el.find(O.EMPTY_FILTER_BUTTON);this._getObjState("showFilter")?n.show():n.hide()}},R.prototype._setSize=function(a){if(this._getObjState("size")===a)return void t.info("Aborting resize because current size is equal to selected one");this._setObjState("size",a),this.$el.find(O.BOX).attr("data-size",this._getObjState("size"));var n=e.extend(!0,{},this.getState());E.publish(s.resize,this),this._trigger("resize",n),this._redrawTabs()},R.prototype._redrawTabs=function(){var t=this._getObjState("tab");this._callTabInstanceMethod({tab:t,method:"redraw"}),this._syncFrontTabs()},R.prototype._getEventTopic=function(t,e){var a=s[t]?s[t]:t;return e===!0?a:a+"."+this.id},R.prototype._forceModelFilter=function(){t.warn("Force model filter"),this.forceModelFilter=!0,this._disableFlip(),this._flip("back"),this._renderBackFace(),this._setStatus("ready")},R.prototype._dispose=function(){this._unbindEventListeners(),this._disposeBoxFaces(),this.$el.remove(),this._trigger("dispose"),delete this},R.prototype._disposeBoxFaces=function(){this._disposeFrontFace(),this._disposeBackFace()},R.prototype._disposeFrontFace=function(){var t=this.front_tab_instances,e=Object.keys(t);n.each(e,n.bind(function(t){this._callTabInstanceMethod({tab:t,method:"dispose"})},this)),this.frontFaceIsRendered=!1},R.prototype._disposeBackFace=function(){var t=this.back_tab_instances,e=Object.keys(t);n.each(e,n.bind(function(t){this._callTabInstanceMethod({tab:t,method:"dispose",face:"back"})},this)),this.$el.find(O.BACK_FACE).find("[data-action]").off(),this.$processSteps.empty(),this.backFaceIsRendered=!1},R.prototype._unbindEventListeners=function(){E.unsubscribe(this._getEventTopic("remove"),this._onRemoveEvent),E.unsubscribe(this._getEventTopic("resize"),this._onResizeEvent),E.unsubscribe(this._getEventTopic("clone"),this._onCloneEvent),E.unsubscribe(this._getEventTopic("flip"),this._onFlipEvent),E.unsubscribe(this._getEventTopic("metadata"),this._onMetadataEvent),E.unsubscribe(this._getEventTopic("tab"),this._onTabEvent),E.unsubscribe(this._getEventTopic("minimize"),this._onMinimizeEvent),E.unsubscribe(this._getEventTopic("query"),this._onQueryEvent),E.unsubscribe(this._getEventTopic("filter"),this._onFilterEvent),E.unsubscribe(this._getEventTopic("download"),this._onDownloadEvent),this.$el.find("[data-action]").off(),this.$el.find(O.RIGHT_MENU).off(),this.$el.find(O.OTHER_CONTENT).find("[data-action]").off(),this.$el.find(O.FRONT_FACE).find("[data-action]").off()},R.prototype._getPluginPath=function(t){return C+t.path},R}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r,s=t.escapeExpression,l=t.lambda;return'<li data-role="step-metadata" class="step-container" data-tab="'+s((r=null!=(r=a.id||(null!=e?e.id:e))?r:a.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:i}):r))+'"\n    data-resourceRepresentationType="'+s(l(null!=(o=null!=(o=null!=e?e.metadata:e)?o.meContent:o)?o.resourceRepresentationType:o,e))+'">\n    <span class="step-icon fx-background-color-primary-color icojam_box"></span>\n    <h6 class="truncate step-title">'+s(l(null!=(o=null!=e?e.labels:e)?o.title:o,e))+"</h6>\n</li>"},useData:!0})},function(t,e,a){t.exports=a(4).default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function o(){var t=new s.HandlebarsEnvironment;return p.extend(t,s),t.SafeString=u.default,t.Exception=d.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=_,t.template=function(e){return _.template(e,t)},t}e.__esModule=!0;var r=a(5),s=i(r),l=a(19),u=n(l),c=a(7),d=n(c),h=a(6),p=i(h),b=a(20),_=i(b),f=a(21),g=n(f),m=o();m.create=o,g.default(m),m.default=m,e.default=m,t.exports=e.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,a){this.helpers=t||{},this.partials=e||{},this.decorators=a||{},l.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=i;var o=a(6),r=a(7),s=n(r),l=a(8),u=a(16),c=a(18),d=n(c),h="4.0.5";e.VERSION=h;var p=7;e.COMPILER_REVISION=p;var b={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=b;var _="[object Object]";i.prototype={constructor:i,logger:d.default,log:d.default.log,registerHelper:function(t,e){if(o.toString.call(t)===_){if(e)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===_)o.extend(this.partials,t);else{if("undefined"==typeof e)throw new s.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===_){if(e)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var f=d.default.log;e.log=f,e.createFrame=o.createFrame,e.logger=d.default},function(t,e){"use strict";function a(t){return c[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var a in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],a)&&(t[a]=arguments[e][a]);return t}function i(t,e){for(var a=0,n=t.length;a<n;a++)if(t[a]===e)return a;return-1}function o(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return h.test(t)?t.replace(d,a):t}function r(t){return!t&&0!==t||!(!_(t)||0!==t.length)}function s(t){var e=n({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=n,e.indexOf=i,e.escapeExpression=o,e.isEmpty=r,e.createFrame=s,e.blockParams=l,e.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,h=/[&<>"'`=]/,p=Object.prototype.toString;e.toString=p;var b=function(t){return"function"==typeof t};b(/x/)&&(e.isFunction=b=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)}),e.isFunction=b;var _=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===p.call(t)};e.isArray=_},function(t,e){"use strict";function a(t,e){var i=e&&e.loc,o=void 0,r=void 0;i&&(o=i.start.line,r=i.start.column,t+=" - "+o+":"+r);for(var s=Error.prototype.constructor.call(this,t),l=0;l<n.length;l++)this[n[l]]=s[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,a),i&&(this.lineNumber=o,this.column=r)}e.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=new Error,e.default=a,t.exports=e.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){r.default(t),l.default(t),c.default(t),h.default(t),b.default(t),f.default(t),m.default(t)}e.__esModule=!0,e.registerDefaultHelpers=i;var o=a(9),r=n(o),s=a(10),l=n(s),u=a(11),c=n(u),d=a(12),h=n(d),p=a(13),b=n(p),_=a(14),f=n(_),g=a(15),m=n(g)},function(t,e,a){"use strict";e.__esModule=!0;var n=a(6);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,a){var i=a.inverse,o=a.fn;if(e===!0)return o(this);if(e===!1||null==e)return i(this);if(n.isArray(e))return e.length>0?(a.ids&&(a.ids=[a.name]),t.helpers.each(e,a)):i(this);if(a.data&&a.ids){var r=n.createFrame(a.data);r.contextPath=n.appendContextPath(a.data.contextPath,a.name),a={data:r}}return o(e,a)})},t.exports=e.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=a(6),o=a(7),r=n(o);e.default=function(t){t.registerHelper("each",function(t,e){function a(e,a,o){u&&(u.key=e,u.index=a,u.first=0===a,u.last=!!o,c&&(u.contextPath=c+e)),l+=n(t[e],{data:u,blockParams:i.blockParams([t[e],e],[c+e,null])})}if(!e)throw new r.default("Must pass iterator to #each");var n=e.fn,o=e.inverse,s=0,l="",u=void 0,c=void 0;if(e.data&&e.ids&&(c=i.appendContextPath(e.data.contextPath,e.ids[0])+"."),i.isFunction(t)&&(t=t.call(this)),e.data&&(u=i.createFrame(e.data)),t&&"object"==typeof t)if(i.isArray(t))for(var d=t.length;s<d;s++)s in t&&a(s,s,s===t.length-1);else{var h=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==h&&a(h,s-1),h=p,s++);void 0!==h&&a(h,s-1,!0)}return 0===s&&(l=o(this)),l})},t.exports=e.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=a(7),o=n(i);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,a){"use strict";e.__esModule=!0;var n=a(6);e.default=function(t){t.registerHelper("if",function(t,e){return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,a){return t.helpers.if.call(this,e,{fn:a.inverse,inverse:a.fn,hash:a.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],a=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=a.hash.level?i=a.hash.level:a.data&&null!=a.data.level&&(i=a.data.level),e[0]=i,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,a){"use strict";e.__esModule=!0;var n=a(6);e.default=function(t){t.registerHelper("with",function(t,e){n.isFunction(t)&&(t=t.call(this));var a=e.fn;if(n.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&(i=n.createFrame(e.data),i.contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),a(t,{data:i,blockParams:n.blockParams([t],[i&&i.contextPath])})})},t.exports=e.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){r.default(t)}e.__esModule=!0,e.registerDefaultDecorators=i;var o=a(17),r=n(o)},function(t,e,a){"use strict";e.__esModule=!0;var n=a(6);e.default=function(t){t.registerDecorator("inline",function(t,e,a,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var r=a.partials;a.partials=n.extend({},r,e.partials);var s=t(i,o);return a.partials=r,s}),e.partials[i.args[0]]=i.fn,o})},t.exports=e.default},function(t,e,a){"use strict";e.__esModule=!0;var n=a(6),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var a=arguments.length,n=Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];console[e].apply(console,n)}}};e.default=i,t.exports=e.default},function(t,e){"use strict";function a(t){this.string=t}e.__esModule=!0,a.prototype.toString=a.prototype.toHTML=function(){return""+this.string},e.default=a,t.exports=e.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function o(t){var e=t&&t[0]||1,a=g.COMPILER_REVISION;if(e!==a){if(e<a){var n=g.REVISION_CHANGES[a],i=g.REVISION_CHANGES[e];throw new f.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new f.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){function a(a,n,i){i.hash&&(n=b.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),a=e.VM.resolvePartial.call(this,a,n,i);var o=e.VM.invokePartial.call(this,a,n,i);if(null==o&&e.compile&&(i.partials[i.name]=e.compile(a,t.compilerOptions,e),o=i.partials[i.name](n,i)),null!=o){if(i.indent){for(var r=o.split("\n"),s=0,l=r.length;s<l&&(r[s]||s+1!==l);s++)r[s]=i.indent+r[s];o=r.join("\n")}return o}throw new f.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function n(e){function a(e){return""+t.main(i,e,i.helpers,i.partials,r,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=o.data;n._setup(o),!o.partial&&t.useData&&(r=d(e,r));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=o.depths?e!==o.depths[0]?[e].concat(o.depths):o.depths:[e]),(a=h(t.main,a,i,o.depths||[],r,l))(e,o)}if(!e)throw new f.default("No environment passed to template");if(!t||!t.main)throw new f.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i={strict:function(t,e){if(!(e in t))throw new f.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var a=t.length,n=0;n<a;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:b.escapeExpression,invokePartial:a,fn:function(e){var a=t[e];return a.decorator=t[e+"_d"],a},programs:[],program:function(t,e,a,n,i){var o=this.programs[t],r=this.fn(t);return e||i||n||a?o=s(this,t,r,e,a,n,i):o||(o=this.programs[t]=s(this,t,r)),o},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var a=t||e;return t&&e&&t!==e&&(a=b.extend({},e,t)),a},noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(a){a.partial?(i.helpers=a.helpers,i.partials=a.partials,i.decorators=a.decorators):(i.helpers=i.merge(a.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(a.partials,e.partials)),(t.usePartial||t.useDecorators)&&(i.decorators=i.merge(a.decorators,e.decorators)))},n._child=function(e,a,n,o){if(t.useBlockParams&&!n)throw new f.default("must pass block params");if(t.useDepths&&!o)throw new f.default("must pass parent depths");return s(i,e,t[e],a,0,n,o)},n}function s(t,e,a,n,i,o,r){function s(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r;return r&&e!==r[0]&&(s=[e].concat(r)),a(t,e,t.helpers,t.partials,i.data||n,o&&[i.blockParams].concat(o),s)}return s=h(a,s,t,r,n,o),s.program=e,s.depth=r?r.length:0,s.blockParams=i||0,s}function l(t,e,a){return t?t.call||a.name||(a.name=t,t=a.partials[t]):t="@partial-block"===a.name?a.data["partial-block"]:a.partials[a.name],t}function u(t,e,a){a.partial=!0,a.ids&&(a.data.contextPath=a.ids[0]||a.data.contextPath);var n=void 0;if(a.fn&&a.fn!==c&&(a.data=g.createFrame(a.data),n=a.data["partial-block"]=a.fn,n.partials&&(a.partials=b.extend({},a.partials,n.partials))),void 0===t&&n&&(t=n),void 0===t)throw new f.default("The partial "+a.name+" could not be found");if(t instanceof Function)return t(e,a)}function c(){return""}function d(t,e){return e&&"root"in e||(e=e?g.createFrame(e):{},e.root=t),e}function h(t,e,a,n,i,o){if(t.decorator){var r={};e=t.decorator(e,r,a,n&&n[0],i,o,n),b.extend(e,r)}return e}e.__esModule=!0,e.checkRevision=o,e.template=r,e.wrapProgram=s,e.resolvePartial=l,e.invokePartial=u,e.noop=c;var p=a(6),b=i(p),_=a(7),f=n(_),g=a(5)},function(t,e){(function(a){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof a?a:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(e,a){e.exports=t},function(t,a){t.exports=e},function(t,e){t.exports=a},function(t,e,a){var n;n=function(){"use strict";return{status:"loading",tab:"table",size:"full",face:"front",faces:["front","back"],pluginRegistry:{blank:{path:"blank"},table:{path:"table"},map:{path:"map"},chart:{path:"chart"},metadata:{path:"metadata"},filter:{path:"filter"},download:{path:"download"}},tabs:{table:{options:{}},metadata:{options:{}},filter:{options:{}},map:{options:{}},chart:{options:{type:"line"}},download:{options:{}}},flippedClassName:"flipped",state:{},lang:"FR",langFallbackOrder:["EN","FR","ES","AR","PR"],toolbarPosition:"up",loadResourceServiceQueryParams:{dsd:!0},syncTabsOnToolbarChange:!1,renderVisualizationComponents:!0,maxDataSize:3500,minDataSize:0,cache:!1}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,a){var n;n=function(){"use strict";var t="";return{MISSING_CONTAINER:t+"missing_container",LOAD_RESOURCE:t+"load_resource",LOAD_METADATA:t+"load_metadata",MISSING_TAB:t+"missing_tab",FETCH_RESOURCE:t+"fetch_resource",MISSING_DATASOURCES:t+"missing_datasources",UNKNOWN_RESOURCE_TYPE:t+"unknown_resource_type",MISSING_GEO_COLUMN:t+"missing_geo_column",NO_NUMBER_DATATYPE:t+"no_number_datatype",VALUE_IN_GROUP_BY:t+"value_in_group_by",MISSING_GROUP_BY:t+"missing_group_by",MISSING_VALUE_IN_AGGREGATION_RULES:t+"missing_value_in_aggregation_rules",GROUP_BY_CONTAINS_NO_KEY:t+"group_by_contains_no_key",EXCLUDE_KEY_DIMENSION:t+"exclude_key_dimension",INCOMPATIBLE_RESOURCE_TYPE:t+"incompatible_resource_type",RESOURCE_STATUS:t+"resource_status"}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,a){var n;n=function(){"use strict";var t="fx.visualization.";return{remove:t+"remove",resize:t+"resize",clone:t+"clone",flip:t+"flip",metadata:t+"metadata",tab:t+"tab",query:t+"query",toolbar:t+"toolbar",model_done:"model.done",model_error:"model.error"}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(30),a(31)],i=function(t,e,a,n,i,o,r,s){"use strict";function l(){return this.fenixTool=new r,this}return l.prototype._getToolbarConfig=function(t,e){return this.fenixTool.toFilter(t,e)},l.prototype.getTableToolbarConfig=function(t,e){return this._getToolbarConfig(t,e)},l.prototype.getChartToolbarConfig=function(e,a){return this._getToolbarConfig(e,t.extend(a,{rowLabel:s.series,columnsLabel:s.xAxis,valuesLabel:s.yAxis}))},l.prototype.getMapToolbarConfig=function(t,e){return{}},l.prototype.getChartCreatorConfiguration=function(t){return this.fenixTool.toChartConfig(t)},l.prototype.getTableCreatorConfiguration=function(t){return this.fenixTool.toTableConfig(t)},l.prototype.getMapCreatorConfiguration=function(t){return this.fenixTool.toTableConfig(t)},l.prototype.assign=function(t,e,a){if("string"==typeof e&&(e=e.split(".")),e.length>1){var n=e.shift();this.assign(t[n]="[object Object]"===Object.prototype.toString.call(t[n])?t[n]:{},e,a)}else t[e[0]]=a},l.prototype.getNestedProperty=function(e,a){for(var a=t.extend(!0,{},a),n=e.split(".");n.length&&(a=a[n.shift()]););return a},l.prototype.cleanArray=function(t){for(var e=[],a=0;a<t.length;a++)t[a]&&e.push(t[a]);return e},new l}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports=n},function(t,e){t.exports=i},function(t,e,a){var n,i;n=[a(32),a(33)],i=function(t,e){"use strict";return{en:t,fr:e}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n;n=function(){"use strict";return{confirm_remove:"Remove resource?",submit_button:"Submit",reset_button:"Reset",add_button:"Add",remove_button:"Remove",cancel_button:"Cancel",computed_resource:" (computed)",computed_export:"This is a computed resource.",back_current_resource:"Resources",no_number_datatype:"Impossible to aggregate for [{{ dimensions }}] because the data type is not number",value_in_group_by:"'Value' dimension can not be in group by",missing_group_by:"Specify at least one 'group by'",missing_value_in_aggregation_rules:"'Value' should be in Sum, Average, First or Last",group_by_contains_no_key:"'Group by' can contains only key dimensions",exclude_key_dimension:"The dimensions [{{ dimensions }}] can not be excluded because keys.",aggregations_dimensions:"Dimensions",aggregations_group:"Group by",aggregations_sum:"Sum",aggregations_avg:"Average",aggregations_first:"First",aggregations_last:"Last",map_select_overlay:"Select Overlayer",map_baselayers:"Base Layers",map_selected_layers:"Selected Layers",map_show_bounds:"Show Map Boundaries",map_show_labels:"Show Map Labels",step_metadata:"Metadata",step_filter:"Filter",step_aggregations:"Aggregations",step_map:"Earthstat Layer Collection",series:"Series",xAxis:"X Axis",yAxis:"Y Axis",tooltip_right_menu:"Settings",tooltip_remove_button:"Close resource",tooltip_resize_button:"Resize resource",tooltip_clone_button:"Clone resource",tooltip_flip_button:"Resource filtering",tooltip_metadata_button:"Visualize metadata",tooltip_minimize_button:"Minimize resource",tooltip_download_button:"Download resource",tooltip_toolbar_button:"Visualization options",error_content_title:"An error occurred",error_content_text:"You can remove the AVB, please use the button below",empty_content_title:"The result is empty",empty_content_text:"You can remove the AVB or redo the filtering, please use the button below",huge_content_title:"The result is too big for the visualization",huge_content_text:"You can redo the filtering, please use the button below",menu_download:"Download",menu_download_data:"Resource",menu_download_metadata:"Metadata",menu_visualize_as:"Visualize as",menu_visualize_as_chart:"Chart",menu_chart_line:"Line",menu_chart_column:"Column",menu_chart_column_stacked:"Column stacked",menu_chart_area:"Area",menu_visualize_as_map:"Map",menu_visualize_as_table:"Table",menu_size:"Size",menu_full:"Full",menu_half:"Half",tab_table_toolbar_format:"Format",tab_table_toolbar_decimals:"Decimals",tab_table_toolbar_show:"Show",tab_table_toolbar_dimensionsSort:"Sort dimension",tab_table_toolbar_aggregationValue:"Aggregator for Value",tab_table_toolbar_rows:"Rows",tab_table_toolbar_columns:"Columns",tab_table_toolbar_hidden:"Hidden",tab_table_toolbar_values:"Values",tab_table_toolbar_aggregations:"Aggregations",tab_table_toolbar_unit:"Unit",tab_table_toolbar_flag:"Flag",tab_table_toolbar_code:"Code"}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,a){var n;n=function(){"use strict";return{confirm_remove:"Voulez-vou supprimer la ressource?",submit_button:"Envoyer",reset_button:"Réinitialiser",add_button:"Ajouter",remove_button:"Supprimer",cancel_button:"Annuler",computed_resource:" (calculé)",computed_export:"Il s'agit d'une ressource calculée.",back_current_resource:"Ressources",no_number_datatype:"Impossible agréger par [{{ dimensions }}] parce que le type de données n’est pas un nombre",value_in_group_by:"La dimension 'Valeur' ne peut pas être dans le groupe par",missing_group_by:"Spécifier au moins un 'groupe par'",missing_value_in_aggregation_rules:"'Valeur' doit être dan Somme, Moyenne, Premier ou Dernier",group_by_contains_no_key:"'Groupe par' peut contenir seulement des dimensions",exclude_key_dimension:"Les dimensions [{{ dimensions }}] ne peuvent pas être exclues parce qu’elles sont clés.",aggregations_dimensions:"Dimensions",aggregations_group:"Grouper par",aggregations_sum:"Somme",aggregations_avg:"Moyenne",aggregations_first:"Premier",aggregations_last:"Dernier",map_select_overlay:"Sélectionner la Surcouche",map_baselayers:"Couches de base",map_selected_layers:"Couches sélectionnés",map_show_bounds:"Voir la carte des limites",map_show_labels:"Voir la carte des étiquettes",step_metadata:"Métadonnées",step_filter:"Filtrer",step_aggregations:"Agrégations",step_map:"Collection de Couche Earthstat",series:"Série",xAxis:"Axe X",yAxis:"Axe Y",tooltip_right_menu:"Paramètres",tooltip_remove_button:"Fermer la ressource",tooltip_resize_button:"Redimensionner la ressource",tooltip_clone_button:"Dupliquer la ressource",tooltip_flip_button:"Filtrer la ressource",tooltip_metadata_button:"Visualiser les métadonnées",tooltip_minimize_button:"Minimiser la ressource",tooltip_download_button:"Télécharger la ressource",tooltip_toolbar_button:"Options de Visualisation ",error_content_title:"Une erreur est survenue",error_content_text:"Vous pouvez supprimer l’AVB en utilisant le bouton ci-dessous",empty_content_title:"Le résultat est vide",empty_content_text:"Vous pouvez supprimer l’AVB ou refaire le filtrage en utilisant le bouton ci-dessous",huge_content_title:"Le résultat est trop vaste pour être visualisé",huge_content_text:"Vous pouvez refaire le filtrage en utilisant le bouton ci-dessous",menu_download:"Téléchargement",menu_download_data:"Ressource",menu_download_metadata:"Métadonnées",menu_visualize_as:"Visualiser comme",menu_visualize_as_chart:"Graphique",menu_chart_line:"En ligne",menu_chart_column:"En colonnes",menu_chart_column_stacked:"En colonnes empilées",menu_chart_area:"En zone",menu_visualize_as_map:"Carte",menu_visualize_as_table:"Tableau",menu_size:"Largeur",menu_full:"Largeur complète",menu_half:"Demi-largeur",tab_table_toolbar_format:"Format",tab_table_toolbar_decimals:"Décimales",tab_table_toolbar_show:"Montrer",tab_table_toolbar_dimensionsSort:"Ordre des dimensions",tab_table_toolbar_aggregationValue:"Agrégateur pour Valeur",tab_table_toolbar_rows:"Lignes",tab_table_toolbar_columns:"Colonnes",
tab_table_toolbar_hidden:"Caché",tab_table_toolbar_values:"Valeurs",tab_table_toolbar_aggregations:"Agrégations",tab_table_toolbar_unit:"Unité",tab_table_toolbar_flag:"Flag",tab_table_toolbar_code:"Code"}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports=o},function(t,e){t.exports=r},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({1:function(t,e,a,n,i){var o,r=null!=e?e:{};return'\n                            <div data-role="front-toolbar" class="vb-toolbar front-toolbar clearfix">\n\n'+(null!=(o=a.unless.call(r,null!=e?e.hideMenu:e,{name:"unless",hash:{},fn:t.program(2,i,0),inverse:t.noop,data:i}))?o:"")+'\n                                <h6 data-role="box-title" class="box-title fx-text-primary-color truncate"\n                                    data-grid="fx-grid-item-handle"></h6>\n\n                                <div class="btn-group toolbar-cmd-right">\n'+(null!=(o=a.unless.call(r,null!=e?e.hideFlipButton:e,{name:"unless",hash:{},fn:t.program(5,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideDownloadButton:e,{name:"unless",hash:{},fn:t.program(7,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideCloneButton:e,{name:"unless",hash:{},fn:t.program(9,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideMinimizeButton:e,{name:"unless",hash:{},fn:t.program(11,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideRemoveButton:e,{name:"unless",hash:{},fn:t.program(13,i,0),inverse:t.noop,data:i}))?o:"")+"\n                                </div>\n                            </div>\n\n"},2:function(t,e,a,n,i){var o,r,s=null!=e?e:{};return'\n                                    <div class="toolbar-cmd-left">\n                                        <div data-role="right-menu" class="dropdown pull-left"\n                                             title="'+t.escapeExpression((r=null!=(r=a.tooltip_right_menu||(null!=e?e.tooltip_right_menu:e))?r:a.helperMissing,"function"==typeof r?r.call(s,{name:"tooltip_right_menu",hash:{},data:i}):r))+'">\n\n                                            <button class="btn btn-default" type="button" data-toggle="dropdown">\n                                                <span class="icojam_preview_list"></span>\n                                            </button>\n                                        </div>\n\n'+(null!=(o=a.unless.call(s,null!=e?e.hideMetadataButton:e,{name:"unless",hash:{},fn:t.program(3,i,0),inverse:t.noop,data:i}))?o:"")+"                                    </div>\n\n"},3:function(t,e,a,n,i){var o;return'                                            <button data-action="metadata" class="btn btn-default meta-btn pull-left"\n                                                    type="button" title="'+t.escapeExpression((o=null!=(o=a.tooltip_metadata_button||(null!=e?e.tooltip_metadata_button:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"tooltip_metadata_button",hash:{},data:i}):o))+'">META\n                                            </button>\n'},5:function(t,e,a,n,i){var o;return'                                        <button data-action="flip" class="btn btn-default" type="button"\n                                                title="'+t.escapeExpression((o=null!=(o=a.tooltip_flip_button||(null!=e?e.tooltip_flip_button:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"tooltip_flip_button",hash:{},data:i}):o))+'">\n                                            <span class="icojam_options_1"></span>\n                                        </button>\n'},7:function(t,e,a,n,i){var o;return'                                        <button data-action="download" data-target="data" class="btn btn-default"\n                                                title="'+t.escapeExpression((o=null!=(o=a.tooltip_download_button||(null!=e?e.tooltip_download_button:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"tooltip_download_button",hash:{},data:i}):o))+'"\n                                                type="button">\n                                            <span class="icojam_download_1"></span>\n                                        </button>\n'},9:function(t,e,a,n,i){var o;return'                                        <button data-action="clone" class="btn btn-default" type="button"\n                                                title="'+t.escapeExpression((o=null!=(o=a.tooltip_clone_button||(null!=e?e.tooltip_clone_button:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"tooltip_clone_button",hash:{},data:i}):o))+'">\n                                            <span class="icojam_wedding_jewel"></span>\n                                        </button>\n'},11:function(t,e,a,n,i){var o;return'                                        <button data-action="minimize" class="btn btn-default" type="button"\n                                                title="'+t.escapeExpression((o=null!=(o=a.tooltip_minimize_button||(null!=e?e.tooltip_minimize_button:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"tooltip_minimize_button",hash:{},data:i}):o))+'">\n                                            <span class="icojam_view_roll-up_1"></span>\n                                        </button>\n'},13:function(t,e,a,n,i){var o;return'                                        <button data-action="remove" class="btn btn-default" type="button"\n                                                title="'+t.escapeExpression((o=null!=(o=a.tooltip_remove_button||(null!=e?e.tooltip_remove_button:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"tooltip_remove_button",hash:{},data:i}):o))+'">\n                                            <span class="icojam_button_delete_1"></span>\n                                        </button>\n'},15:function(t,e,a,n,i){var o,r=null!=e?e:{};return'\n                            <div data-role="back-toolbar" class="vb-toolbar back-toolbar clearfix">\n\n'+(null!=(o=a.unless.call(r,null!=e?e.hideMenu:e,{name:"unless",hash:{},fn:t.program(16,i,0),inverse:t.noop,data:i}))?o:"")+'\n                                <h6 data-role="box-title" class="box-title fx-text-primary-color truncate"></h6>\n\n                                <div class="btn-group toolbar-cmd-right">\n'+(null!=(o=a.unless.call(r,null!=e?e.hideFlipButton:e,{name:"unless",hash:{},fn:t.program(19,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideDownloadButton:e,{name:"unless",hash:{},fn:t.program(21,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideCloneButton:e,{name:"unless",hash:{},fn:t.program(23,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideMinimizeButton:e,{name:"unless",hash:{},fn:t.program(25,i,0),inverse:t.noop,data:i}))?o:"")+(null!=(o=a.unless.call(r,null!=e?e.hideRemoveButton:e,{name:"unless",hash:{},fn:t.program(27,i,0),inverse:t.noop,data:i}))?o:"")+"\n                                </div>\n                            </div>\n\n"},16:function(t,e,a,n,i){var o;return'\n                                    <div class="toolbar-cmd-left">\n                                        <div data-role="right-menu" class="dropdown pull-left">\n\n                                            <button class="btn btn-default" type="button" data-toggle="dropdown">\n                                                <span class="icojam_preview_list"></span>\n                                            </button>\n                                        </div>\n'+(null!=(o=a.unless.call(null!=e?e:{},null!=e?e.hideMetadataButton:e,{name:"unless",hash:{},fn:t.program(17,i,0),inverse:t.noop,data:i}))?o:"")+"                                    </div>\n\n"},17:function(t,e,a,n,i){return'                                            <button data-action="metadata" class="btn btn-default meta-btn pull-left"\n                                                    type="button">META\n                                            </button>\n'},19:function(t,e,a,n,i){return'                                        <button data-action="flip" class="btn btn-default" type="button">\n                                            <span class="icojam_options_1"></span>\n                                        </button>\n'},21:function(t,e,a,n,i){return'                                        <button data-action="download" data-target="data" class="btn btn-default"\n                                                type="button">\n                                            <span class="icojam_download_1"></span>\n                                        </button>\n'},23:function(t,e,a,n,i){return'                                        <button data-action="clone" class="btn btn-default" type="button">\n                                            <span class="icojam_wedding_jewel"></span>\n                                        </button>\n'},25:function(t,e,a,n,i){return'                                        <button data-action="minimize" class="btn btn-default" type="button">\n                                            <span class="icojam_view_roll-up_1"></span>\n                                        </button>\n'},27:function(t,e,a,n,i){return'                                        <button data-action="remove" class="btn btn-default" type="button">\n                                            <span class="icojam_button_delete_1"></span>\n                                        </button>\n'},29:function(t,e,a,n,i){return'                    <button data-action="remove" class="btn btn-floating fx-background-color-primary-color btn-fx-status-btn" type="button">\n                        <span class="icojam_minus"></span>\n                    </button>\n'},31:function(t,e,a,n,i){return'\n                    <button data-action="remove" class="btn btn-floating fx-background-color-primary-color btn-fx-status-btn" type="button">\n                        <span class="icojam_minus"></span>\n                    </button>\n\n'},compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r,s=null!=e?e:{},l=a.helperMissing,u="function",c=t.escapeExpression;return'    <div data-role="box" class="fx-box" data-status="'+c((r=null!=(r=a.status||(null!=e?e.status:e))?r:l,typeof r===u?r.call(s,{name:"status",hash:{},data:i}):r))+'" data-size="'+c((r=null!=(r=a.size||(null!=e?e.size:e))?r:l,typeof r===u?r.call(s,{name:"size",hash:{},data:i}):r))+'">\n\n        <div data-content="ready" data-tab="'+c((r=null!=(r=a.default_tab||(null!=e?e.default_tab:e))?r:l,typeof r===u?r.call(s,{name:"default_tab",hash:{},data:i}):r))+'">\n\n            <div data-role="flip-container" class="flip-container">\n\n                <div class="flipper">\n\n                    <!-- Front -->\n                    <div class="front" data-face="front">\n                        <!-- front content -->\n\n'+(null!=(o=a.unless.call(s,null!=e?e.hideToolbar:e,{name:"unless",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?o:"")+'\n                        <div data-role="front-content" class="front-content">\n\n                            <div data-section="chart"></div>\n                            <div data-section="map"></div>\n                            <div data-section="table"></div>\n                            <div data-section="blank"></div>\n                            <div data-section="metadata"></div>\n                            <div data-section="filter"></div>\n                            <div data-section="download"></div>\n\n                        </div>\n\n                    </div>\n\n                    <!-- back -->\n                    <div class="back" data-face="back">\n\n'+(null!=(o=a.unless.call(s,null!=e?e.hideToolbar:e,{name:"unless",hash:{},fn:t.program(15,i,0),inverse:t.noop,data:i}))?o:"")+'\n                        <div data-role="back-content" class="container-fluid back-content">\n                            <div class="alert alert-danger" role="alert" data-role="filter-error">...</div>\n                            <div class="row back-row">\n                                <div data-role=\'back-sidebar\' class="col-xs-12 col-sm-8 col-md-4 hidden-xs hidden-sm">\n                                    <div class="sidebar-content">\n                                        <h6 class="sidebar-title">'+c((r=null!=(r=a.back_current_resource||(null!=e?e.back_current_resource:e))?r:l,typeof r===u?r.call(s,{name:"back_current_resource",hash:{},data:i}):r))+'</h6>\n                                        <div class="process-steps-container">\n                                            <ul data-role=\'process-steps\' class="list-unstyled list-group"></ul>\n                                        </div>\n\n                                    </div>\n                                </div>\n\n                                <button data-action="show-back-sidebar"\n                                        class="btn btn-floating fx-background-color-primary-color btn-fx-toolbar visible-sm visible-xs show-back-sidebar"\n                                        type="button"><span class="icojam_grid_32"></span></button>\n\n                                <div class="col-md-8 col-xs-12 back-right-content">\n\n                                    <ul data-role="process-details"\n                                        class="list-unstyled list-group process-details"></ul>\n\n                                    <div class="row">\n                                        <div class="col-xs-12">\n                                            <div class="btn-group pull-right back-btns">\n\n                                                <button type="button" data-action="flip"\n                                                        class="btn btn-default">'+c((r=null!=(r=a.cancel_button||(null!=e?e.cancel_button:e))?r:l,typeof r===u?r.call(s,{name:"cancel_button",hash:{},data:i}):r))+'\n                                                </button>\n                                                <button type="button" data-action="query" class="btn btn-primary fx-button-primary-color"\n                                                        disabled>'+c((r=null!=(r=a.submit_button||(null!=e?e.submit_button:e))?r:l,typeof r===u?r.call(s,{name:"submit_button",hash:{},data:i}):r))+'</button>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n        <div data-content="error" class="text-center">\n\n            <div class="content-message text-center">\n                <div class="content-message-img error-img"></div>\n\n                <h2>'+c((r=null!=(r=a.error_content_title||(null!=e?e.error_content_title:e))?r:l,typeof r===u?r.call(s,{name:"error_content_title",hash:{},data:i}):r))+"</h2>\n                <p>"+c((r=null!=(r=a.error_content_text||(null!=e?e.error_content_text:e))?r:l,typeof r===u?r.call(s,{name:"error_content_text",hash:{},data:i}):r))+"</p>\n\n"+(null!=(o=a.unless.call(s,null!=e?e.hideRemoveButton:e,{name:"unless",hash:{},fn:t.program(29,i,0),inverse:t.noop,data:i}))?o:"")+'\n            </div>\n\n        </div>\n\n        <div data-content="loading" class="text-center">\n            <span class="loading loading-48"></span>\n        </div>\n\n        <div data-content="empty" class="text-center">\n\n            <div class="content-message text-center">\n                <div class="content-message-img empty-img"></div>\n                <h2>'+c((r=null!=(r=a.empty_content_title||(null!=e?e.empty_content_title:e))?r:l,typeof r===u?r.call(s,{name:"empty_content_title",hash:{},data:i}):r))+"</h2>\n                <p>"+c((r=null!=(r=a.empty_content_text||(null!=e?e.empty_content_text:e))?r:l,typeof r===u?r.call(s,{name:"empty_content_text",hash:{},data:i}):r))+'</p>\n\n                <button data-action="filter" class="btn btn-floating fx-background-color-primary-color btn-fx-status-btn" type="button">\n                    <span class="icojam_filter"></span>\n                </button>\n'+(null!=(o=a.unless.call(s,null!=e?e.hideRemoveButton:e,{name:"unless",hash:{},fn:t.program(31,i,0),inverse:t.noop,data:i}))?o:"")+'\n            </div>\n\n        </div>\n\n        <div data-content="huge" class="text-center">\n\n            <div class="content-message text-center">\n                <div class="content-message-img huge-img"></div>\n                <h2>'+c((r=null!=(r=a.huge_content_title||(null!=e?e.huge_content_title:e))?r:l,typeof r===u?r.call(s,{name:"huge_content_title",hash:{},data:i}):r))+"</h2>\n                <p>"+c((r=null!=(r=a.huge_content_text||(null!=e?e.huge_content_text:e))?r:l,typeof r===u?r.call(s,{name:"huge_content_text",hash:{},data:i}):r))+'</p>\n\n                <button data-action="filter" class="btn btn-floating fx-background-color-primary-color btn-fx-status-btn" type="button">\n                    <span class="icojam_filter"></span>\n                </button>\n\n            </div>\n\n        </div>\n\n    </div>'},useData:!0})},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({1:function(t,e,a,n,i){return'                <div class="swiper-slide filter-slide ">\n                    <div data-selector="'+t.escapeExpression(t.lambda(null!=e?e.id:e,e))+'"></div>\n                </div>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o;return'<div data-role="filter-filter-template">\n\n    <!-- Slider main container -->\n    <div data-role=\'filter-rows-swiper\' class="swiper-container">\n        <!-- Additional required wrapper -->\n        <div class="swiper-wrapper">\n\n'+(null!=(o=a.each.call(null!=e?e:{},null!=e?e.columns:e,{name:"each",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?o:"")+'\n        </div>\n        <!-- If we need pagination -->\n        <div class="swiper-pagination"></div>\n\n        <!-- If we need navigation buttons -->\n        <div class="swiper-button-prev"></div>\n        <div class="swiper-button-next"></div>\n\n    </div>\n\n</div>'},useData:!0})},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){return'<div data-role="filter-map-template"></div>'},useData:!0})},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){return'<div data-role="filter-aggregation-template">\n\n    <div data-selector="aggregations"></div>\n\n</div>'},useData:!0})},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r,s=t.escapeExpression;return'<li data-role="step-filter" class="step-container" data-tab="'+s((r=null!=(r=a.id||(null!=e?e.id:e))?r:a.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:i}):r))+'">\n    <span class="step-icon fx-background-color-primary-color icojam_filter"></span>\n    <h6 class="truncate step-title">'+s(t.lambda(null!=(o=null!=e?e.labels:e)?o.title:o,e))+"</h6>\n</li>"},useData:!0})},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r,s=t.escapeExpression;return'<li data-role="step-map" class="step-container" data-tab="'+s((r=null!=(r=a.id||(null!=e?e.id:e))?r:a.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:i}):r))+'">\n    <span class="step-icon fx-background-color-primary-color icojam_languages"></span>\n    <h6 class="truncate step-title">'+s(t.lambda(null!=(o=null!=e?e.labels:e)?o.title:o,e))+"</h6>\n</li>"},useData:!0})},function(t,e){t.exports=s},function(t,e,a){var n;n=function(){"use strict";return[{label:"Download",url:"",parent_id:"root",id:"download",a_attrs:{"data-id":"download",class:"hidden"}},{label:"Resource",url:"",parent_id:"download",id:"download_data",a_attrs:{"data-action":"download","data-id":"download","data-target":"data"}},{label:"Metadata",url:"",parent_id:"download",id:"download_metadata",a_attrs:{"data-action":"download","data-id":"download","data-target":"metadata"}},{label:"Visualize as",url:"",parent_id:"root",id:"visualize_as"},{label:"Chart",url:"",parent_id:"visualize_as",id:"visualize_as_chart",a_attrs:{"data-action":"tab","data-tab":"chart","data-id":"chart",class:"hidden"}},{label:"Line",url:"",parent_id:"visualize_as_chart",id:"chart_line",a_attrs:{"data-action":"tab","data-tab":"chart","data-id":"chart","data-type":"line"}},{label:"Column",url:"",parent_id:"visualize_as_chart",id:"chart_column",a_attrs:{"data-action":"tab","data-tab":"chart","data-id":"chart","data-type":"column"}},{label:"Column stacked",url:"",parent_id:"visualize_as_chart",id:"chart_column_stacked",a_attrs:{"data-action":"tab","data-tab":"chart","data-id":"chart","data-type":"column_stacked"}},{label:"Area",url:"",parent_id:"visualize_as_chart",id:"chart_area",a_attrs:{"data-action":"tab","data-tab":"chart","data-id":"chart","data-type":"area"}},{label:"Map",url:"",parent_id:"visualize_as",id:"visualize_as_map",a_attrs:{"data-action":"tab","data-tab":"map","data-id":"map",class:"hidden"}},{label:"Table",url:"",parent_id:"visualize_as",id:"visualize_as_table",a_attrs:{"data-action":"tab","data-tab":"table","data-id":"table",class:"hidden"}},{label:"Set size",url:"",parent_id:"root",id:"size"},{label:"Full",url:"",parent_id:"size",id:"full",a_attrs:{"data-action":"resize","data-size":"full"}},{label:"Half",url:"",parent_id:"size",id:"half",a_attrs:{"data-action":"resize","data-size":"half"}}]}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,a){var n;n=function(){return[{Name:"berrynes_area_3857",Title:"berrynes_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","berrynes_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=berrynes_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"blueberry_area_3857",Title:"blueberry_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","blueberry_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=blueberry_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"brazil_area_3857",Title:"brazil_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","brazil_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=brazil_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"broadbean_area_3857",Title:"broadbean_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","broadbean_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=broadbean_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"buckwheat_area_3857",Title:"buckwheat_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","buckwheat_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=buckwheat_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cabbagefor_area_3857",Title:"cabbagefor_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cabbagefor_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cabbagefor_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"canaryseed_area_3857",Title:"canaryseed_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","canaryseed_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=canaryseed_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"carob_area_3857",Title:"carob_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","carob_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=carob_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"carrotarea_3857",Title:"carrotarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","carrotarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=carrotarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"carrotforarea_3857",Title:"carrotforarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","carrotforarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=carrotforarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cashewapplearea_3857",Title:"cashewapplearea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cashewapplearea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cashewapplearea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cashewarea_3857",Title:"cashewarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cashewarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cashewarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cassavaarea_3857",Title:"cassavaarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cassavaarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cassavaarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"castorarea_3857",Title:"castorarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","castorarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=castorarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cauliflowerarea_3857",Title:"cauliflowerarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cauliflowerarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cauliflowerarea_3857",
size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cerealnesarea_3857",Title:"cerealnesarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cerealnesarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cerealnesarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cherryarea_3857",Title:"cherryarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cherryarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cherryarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"chestnutarea_3857",Title:"chestnutarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","chestnutarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=chestnutarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"chickpeaarea_3857",Title:"chickpeaarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","chickpeaarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=chickpeaarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"chicoryarea_3857",Title:"chicoryarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","chicoryarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=chicoryarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"chilietcarea_3857",Title:"chilietcarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","chilietcarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=chilietcarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cinnamonarea_3857",Title:"cinnamonarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cinnamonarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cinnamonarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"citrusnesarea_3857",Title:"citrusnesarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","citrusnesarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=citrusnesarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"clovearea_3857",Title:"clovearea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","clovearea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=clovearea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cloverarea_3857",Title:"cloverarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cloverarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cloverarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cocoaarea_3857",Title:"cocoaarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cocoaarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cocoaarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"coconutarea_3857",Title:"coconutarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","coconutarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=coconutarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"coffeearea_3857",Title:"coffeearea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","coffeearea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=coffeearea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"coirarea_3857",Title:"coirarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","coirarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-179.99999237060547,-85.87863889373075,179.98662764288167,85.81776046752934],BoundingBox:[{crs:"EPSG:3857",extent:[-20037507.49348893,-21205770.720520623,20036019.738804124,21112163.63770032],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=coirarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cottonarea_3857",Title:"cottonarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cottonarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cottonarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"cowpeaarea_3857",Title:"cowpeaarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","cowpeaarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=cowpeaarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"abacaarea_3857",Title:"abacaarea_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","abacaarea_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=abacaarea_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"agave_area_3857",Title:"agave_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","agave_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=agave_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"alfalfa_area_3857",Title:"alfalfa_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","alfalfa_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=alfalfa_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"almond_area_3857",Title:"almond_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","almond_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=almond_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"aniseetc_area_3857",Title:"aniseetc_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","aniseetc_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=aniseetc_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"apple_area_3857",Title:"apple_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","apple_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=apple_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"apricot_area_3857",Title:"apricot_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","apricot_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=apricot_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"areca_area_3857",Title:"areca_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","areca_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=areca_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"artichoke_area_3857",Title:"artichoke_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","artichoke_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=artichoke_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"asparagus_area_3857",Title:"asparagus_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","asparagus_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=asparagus_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"avocado_area_3857",Title:"avocado_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","avocado_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=avocado_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"bambara_area_3857",Title:"bambara_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","bambara_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=bambara_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1},{Name:"banana_area_3857",Title:"banana_area_3857",Abstract:"",KeywordList:["WCS","GeoTIFF","banana_area_3857"],SRS:["EPSG:3857"],LatLonBoundingBox:[-180.00000000000003,-85.81552819353568,179.95503414565607,85.81395348836212],BoundingBox:[{crs:"EPSG:3857",extent:[-20037508.342789248,-21108757.183934048,20032502.766780593,21106355.272253364],res:[null,null]}],Style:[{Name:"earthstat_crop_area_EN",Title:"Rain distribution",Abstract:"",LegendURL:[{Format:"image/png",OnlineResource:"http://fenix.fao.org:20200/geoserver/earthstat/wms?request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=banana_area_3857",size:[20,20]}]}],queryable:!0,opaque:!1,noSubsets:!1}]}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports=l},function(t,e){t.exports=u},function(t,e){t.exports=c},function(t,e){t.exports=d},function(t,e){},,,,,,,,function(t,e){},,function(t,e,a){function n(t){return a(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./index.js":1,"./tabs/blank.js":60,"./tabs/chart.js":64,"./tabs/download.js":69,"./tabs/filter.js":71,"./tabs/map.js":73,"./tabs/metadata.js":79,"./tabs/table.js":81,"./utils.js":28};n.keys=function(){return Object.keys(o)},n.resolve=i,t.exports=n,n.id=59},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(34),a(61),a(62),a(63),a(48)],i=function(t,e,a,n,i,o,r,s,l,u,c){"use strict";function d(e){return t.extend(!0,this,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id}),this.channels={},this.state={},this.lang=this.initial.lang,this}var h={TOOLBAR:"[data-role='toolbar']",FILTER_BTN:"[data-role='toolbar'] [data-role='filter-btn']"};return d.prototype.init=function(){e.info("Tab initialized successfully")},d.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),this.ready=!0,e.info("Tab shown successfully"),this):(e.error("Impossible to create show blank tab"),void e.error(a))},d.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Bank tab: is tab suitable? ",t),t===!0||(e.error(t),this._setState("errors",t),!1)},d.prototype.dispose=function(){this._dispose(),e.info("Tab disposed successfully")},d.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},d.prototype.sync=function(t){e.info("Sync tab. State:"+JSON.stringify(t)),t.hasOwnProperty("toolbar")&&this.toolbar?this.toolbar.setValues(t.toolbar,!0):e.warn("Abort toolbar sync")},d.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},d.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:i.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},d.prototype._show=function(t){this.initialized===!0?e.info("Tab Blank shown again"):(e.info("Tab Blank shown for the first time"),this.syncModel=t,this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0)},d.prototype._attach=function(){var t=s(this);this.$el.html(t)},d.prototype._initVariables=function(){this.$toolbar=this.$el.find(h.TOOLBAR),this.$toolbarBtn=this.$el.find(h.FILTER_BTN)},d.prototype._bindEventListeners=function(){var i=this;c.subscribe(this._getEventTopic("toolbar"),this,this._onToolbarEvent),this.$el.find("[data-action]").each(function(){var a=t(this),n=a.data("action"),o=i._getEventTopic(n);a.on("click",{event:o,tab:i},function(t){t.preventDefault(),e.info("Raise event: "+t.data.event),c.publish(o,{target:this,tab:t.data.tab})})}),this.$toolbarBtn.on("click",a.bind(this._onToolbarBtnClick,this)),n.syncTabsOnToolbarChange===!0&&this.toolbar.on("change",a.bind(this._onToolbarChangeEvent,this))},d.prototype._onToolbarEvent=function(t){e.info("Listen to event: "+this._getEventTopic("toolbar")),e.trace(t);var a="up"!==this.toolbarPosition?"up":"down";this._slideToolbar(a)},d.prototype._slideToolbar=function(t){"up"!==t?(this.$toolbar.show(),this.toolbarPosition="down"):(this.$toolbar.hide(),this.toolbarPosition="up"),this._setState("toolbarPosition",this.toolbarPosition)},d.prototype._onToolbarBtnClick=function(){this._onToolbarEvent(),this._onConfigurationChange()},d.prototype._onToolbarChangeEvent=function(){this._onConfigurationChange()},d.prototype._onConfigurationChange=function(){this._trigger("filter",this.toolbar.getValues())},d.prototype._renderComponents=function(){this._renderToolbar(),this._slideToolbar(this.initial.toolbarPosition||n.toolbarPosition)},d.prototype._renderToolbar=function(){e.info("Blank tab render toolbar"),this.toolbar=new l({selectors:this._createFilterConfiguration(u),el:this.$el.find(h.TOOLBAR)})},d.prototype._createFilterConfiguration=function(){var e=t.extend(!0,{},r.mergeConfigurations(u,this.syncModel||{}));return e},d.prototype._unbindEventListeners=function(){this.$toolbarBtn.off(),this.$el.find("[data-action]").off(),c.unsubscribe(this._getEventTopic("toolbar"),this._onToolbarEvent)},d.prototype._isSuitable=function(){var t=!0,e=[];return e.length>0?e:t},d.prototype._dispose=function(){this.ready===!0&&this._unbindEventListeners()},d.prototype._getEventTopic=function(t){return o[t]?o[t]+this.id:t+this.id},d.prototype._setState=function(e,a){this._assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},d}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o;return'<div data-role="toolbar" class="col-xs-12 col-sm-6 col-md-6">\n    <button data-action="toolbar" class="btn btn-default" type="button">toolbar</button>\n\n    <button data-role="filter-btn" class="btn btn-default" type="button">\n        <span class="glyphicon glyphicon-filter" aria-hidden="true"></span>\n    </button>\n</div>\n\n<div>\n    <button data-action="toolbar" class="btn btn-default" type="button">toolbar</button>\n\n    <div class="alert alert-warning" role="alert"><h1>Hi i\'m the blank tab: '+t.escapeExpression((o=null!=(o=a.id||(null!=e?e.id:e))?o:a.helperMissing,"function"==typeof o?o.call(null!=e?e:{},{name:"id",hash:{},data:i}):o))+"</h1></div>\n</div>"},useData:!0})},function(t,e){t.exports=h},function(t,e,a){var n;n=function(){"use strict";return{sort:{selector:{id:"sortable",source:[{value:"sort_1",label:"Sort 1",parent:"group_1"},{value:"sort_2",label:"Sort 2",parent:"group_1"},{value:"sort_3",label:"Sort 3",parent:"group_2"},{value:"sort_4",label:"Sort 4",parent:"group_3"}],config:{}},template:{hideSwitch:!0,hideRemoveButton:!0,title:"Sort dimension"}},aggregation:{selector:{id:"dropdown",source:[{value:"aggregation_1",label:"Aggregation 1"},{value:"aggregation_2",label:"Aggregation 2"},{value:"aggregation_3",label:"Aggregation 3"},{value:"aggregation_4",label:"Aggregation 4"}],config:{maxItems:1}},template:{hideSwitch:!0,hideRemoveButton:!0,title:"Aggregation function"}},renderer:{selector:{id:"dropdown",source:[{value:"table",label:"Grid"},{value:"chart",label:"Chart"}],config:{maxItems:1}},template:{hideSwitch:!0,hideRemoveButton:!0,title:"Renderer function"}},decimal_separator:{selector:{id:"input",type:"radio",default:["dot"],source:[{value:"dot",label:"Dot"},{value:"comma",label:"Comma"}]},template:{hideSwitch:!0,hideRemoveButton:!0,title:"Decimal separator"}},thousand:{selector:{id:"input",type:"radio",default:["enable"],source:[{value:"enable",label:"Enable"},{value:"disable",label:"Disable"}]},template:{hideSwitch:!0,hideRemoveButton:!0,title:"Thousand"}},decimals:{selector:{id:"input",type:"number",source:[{value:"2"}]},template:{hideSwitch:!0,hideRemoveButton:!0,title:"Decimal digit"}}}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(28),a(34),a(65),a(62),a(66),a(31),a(68),a(48)],i=function(t,e,a,n,i,o,r,s,l,u,c,d,h,p){"use strict";function b(e){return t.extend(!0,this,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id}),this.channels={},this.state={},this.cache=this.initial.cache,this.lang=this.initial.lang,this.environment=this.initial.environment,this}var _={TOOLBAR:"[data-role='toolbar']",FILTER_BTN:"[data-role='filter-btn']"};return b.prototype.init=function(){e.info("Tab initialized successfully")},b.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),e.info("Chart tab shown successfully"),this):(e.error("Impossible to create show table tab"),void e.error(a))},b.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Chart tab: is tab suitable? ",t),t===!0||(e.error(t),this._setState("errors",t),!1)},b.prototype.dispose=function(){this._dispose(),e.info("Tab disposed successfully")},b.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},b.prototype.sync=function(t){return e.info("Sync tab. State:"+JSON.stringify(t)),this.syncState=t,this.toSync=!0,this},b.prototype.redraw=function(){this.chart&&t.isFunction(this.chart.redraw)?this.chart.redraw():e.warn("Abort redraw")},b.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},b.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:i.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},b.prototype._show=function(t){return this.type=t.type,this.initialized!==!0?(e.info("Tab chart shown for the first time"),this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0):(e.info("Tab chart shown again"),this.toSync===!0&&(e.info("Sync tab. State:"+JSON.stringify(this.syncState)),this.syncState.hasOwnProperty("toolbar")&&this.toolbar?(this.toolbar.setValues(this.syncState.toolbar,!0),this.type=t.type,this._renderChart()):this._updateChart())),this},b.prototype._attach=function(){var e=l(t.extend(!0,{},this,d));this.$el.html(e)},b.prototype._initVariables=function(){this.$toolbar=this.$el.find(_.TOOLBAR),this.$toolbarBtn=this.$el.find(_.FILTER_BTN)},b.prototype._bindEventListeners=function(){var i=this;p.subscribe(this._getEventTopic("toolbar"),this,this._onToolbarEvent),this.$el.find("[data-action]").each(function(){var a=t(this),n=a.data("action"),o=i._getEventTopic(n);a.on("click",{event:o,tab:i},function(t){t.preventDefault(),e.info("Raise event: "+t.data.event),p.publish(o,{target:this,tab:t.data.tab})})}),this.$toolbarBtn.on("click",a.bind(this._onToolbarBtnClick,this)),n.syncTabsOnToolbarChange===!0?this.toolbar.on("change",a.bind(this._onToolbarChangeEvent,this)):e.warn("Tab sync is disabled by configuration")},b.prototype._onToolbarEvent=function(t){e.info("Listen to event: "+this._getEventTopic("toolbar")),e.trace(t);var a="up"!==this.toolbarPosition?"up":"down";this._slideToolbar(a)},b.prototype._slideToolbar=function(t){"up"!==t?(this.$toolbar.addClass("in"),this.$toolbarBtn.addClass("in"),this.toolbarPosition="down"):(this.$toolbar.removeClass("in"),this.$toolbarBtn.removeClass("in"),this.toolbarPosition="up"),this._setState("toolbarPosition",this.toolbarPosition)},b.prototype._onToolbarBtnClick=function(){this._onToolbarEvent(),this._onConfigurationChange()},b.prototype._renderChart=function(){var a=this.toolbar.getValues(),i=r.getChartCreatorConfiguration(a);if(n.renderVisualizationComponents===!1)return void e.warn("Render Visualization component blocked by configuration");var o=t.extend(!0,{},i,{model:this.model,el:"#chart_"+this.id,type:this.type});this.chart=new h(o)},b.prototype._updateChart=function(){var a=this.toolbar.getValues(),i=r.getChartCreatorConfiguration(a);return n.renderVisualizationComponents===!1?void e.warn("Render Visualization component blocked by configuration"):void this.chart.update(t.extend(!0,{},i,{model:this.model,el:"#chart_"+this.id,type:this.type}))},b.prototype._renderToolbar=function(){e.info("Chart tab render toolbar");var t=this,n={selectors:this._createFilterConfiguration(),cache:this.cache,el:this.$el.find(_.TOOLBAR),environment:this.initial.environment,lang:this.lang},i={};n.selectors.hasOwnProperty("dimensionsSort")&&(a.each(n.selectors.dimensionsSort.selector.config.groups,function(e,a){i[a]=d[t.lang.toLowerCase()]["tab_table_toolbar_"+a]}),n.selectors.dimensionsSort.selector.config.groups=i);var o=r.getNestedProperty("selectors.show.selector.source",n);a.map(o,function(e){return e.label=d[t.lang.toLowerCase()]["tab_table_toolbar_"+e.value]||e.label,e}),r.assign(n,"selectors.show.selector.source",o),this.toolbar=new u(n),this.toolbar.on("ready",a.bind(this._renderChart,this))},b.prototype._createFilterConfiguration=function(){var e=r.getChartToolbarConfig(this.model,{lang:this.lang.toUpperCase()}),n=t.extend(!0,{},c,e),i=t.extend(!0,{},s.mergeConfigurations(n,this.syncState.toolbar||{})),o=this;
return a.each(i,a.bind(function(t,e){t.template.title=d[o.lang.toLowerCase()]["tab_table_toolbar_"+e]},this)),i},b.prototype._onToolbarChangeEvent=function(){this._onConfigurationChange()},b.prototype._onConfigurationChange=function(){this._trigger("filter",this.toolbar.getValues()),this._renderChart()},b.prototype._renderComponents=function(){this._renderToolbar();var t=this.initial.toolbarPosition||n.toolbarPosition;"up"===t?this.toolbarPosition="up":this.toolbarPosition="down"},b.prototype._unbindEventListeners=function(){this.$toolbarBtn.off(),this.$el.find("[data-action]").off(),p.unsubscribe(this._getEventTopic("toolbar"),this._onToolbarEvent)},b.prototype._isSuitable=function(){var t=!0,e=[],a=r.getNestedProperty("metadata.meContent.resourceRepresentationType",this.model);return"dataset"!==a&&e.push({code:i.INCOMPATIBLE_RESOURCE_TYPE}),e.length>0?e:t},b.prototype._dispose=function(){this.ready===!0&&this._unbindEventListeners()},b.prototype._getEventTopic=function(t){return o[t]?o[t]+this.id:t+this.id},b.prototype._setState=function(e,a){s.assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},b.prototype._getNestedProperty=function(e,a){for(var a=t.extend(!0,{},a),n=e.split(".");n.length&&(a=a[n.shift()]););return a},b}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r=null!=e?e:{},s=a.helperMissing,l="function",u=t.escapeExpression;return'<button data-action="toolbar" class="btn btn-floating fx-background-color-primary-color btn-fx-toolbar" type="button" title="'+u((o=null!=(o=a.tooltip_toolbar_button||(null!=e?e.tooltip_toolbar_button:e))?o:s,typeof o===l?o.call(r,{name:"tooltip_toolbar_button",hash:{},data:i}):o))+'"><span class="icojam_options2"></span></button>\n<button data-role="filter-btn" class="btn btn-floating btn-fx-toolbar-confirm" type="button"><span class="icojam_check"></span></button>\n\n<div data-role="toolbar" class="col-xs-12 col-sm-6 col-md-6">\n    <div data-selector="dimensionsSort"></div>\n</div>\n\n<div class="tab-item-content-wrapper">\n\t<div id="chart_'+u((o=null!=(o=a.id||(null!=e?e.id:e))?o:s,typeof o===l?o.call(r,{name:"id",hash:{},data:i}):o))+'" class="tab-item-content"></div>\n</div>'},useData:!0})},function(t,e,a){var n,i;n=[a(29),a(67)],i=function(t,e){"use strict";return t.extend(!0,{},e,{show:{selector:{id:"input",type:"checkbox",source:[{value:"code",label:"Code"}]},template:{title:"Show"}}})}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n;n=function(){"use strict";return{format:{selector:{id:"dropdown",source:[{value:"localstring",label:"Local String"},{value:"value",label:"Raw Value"}],config:{maxItems:1},default:["localstring"]},template:{title:"Format"}},decimals:{selector:{id:"dropdown",source:[{value:"0",label:0},{value:"1",label:1},{value:"2",label:2},{value:"3",label:3},{value:"4",label:4},{value:"5",label:5}],config:{maxItems:1},default:[2]},template:{title:"Decimals"},className:"testDec"}}}.call(e,a,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports=p},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(28),a(70),a(46)],i=function(t,e,a,n,i,o,r,s,l){"use strict";function u(e){return t.extend(!0,this,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id}),this.channels={},this.state={},this.report=new l({cache:this.initial.cache}),this.lang=this.initial.lang,this}var c={CONTAINER:'[data-role="download"]',DOWNLOAD_BTN:'[data-action="download"]'};return u.prototype.init=function(){e.info("Tab initialized successfully")},u.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),this.ready=!0,e.info("trigger 'ready' event"),this._trigger("ready"),e.info("Tab shown successfully"),this):(e.error("Impossible to create show download tab"),void e.error(a))},u.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Download tab: is tab suitable? ",t),t===!0||(e.error(t),this._setState("errors",t),!1)},u.prototype.dispose=function(){this._dispose(),e.info("Tab disposed successfully")},u.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},u.prototype.sync=function(t){e.info("Sync tab. State:"+JSON.stringify(t)),t.hasOwnProperty("toolbar")&&this.toolbar?this.toolbar.setValues(t.toolbar,!0):e.warn("Abort toolbar sync")},u.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},u.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:i.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},u.prototype._show=function(t){this.initialized===!0?e.info("Tab Download shown again"):(e.info("Tab Download shown for the first time"),this.syncModel=t,this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0)},u.prototype._attach=function(){var t=s(this);this.$el.html(t)},u.prototype._initVariables=function(){},u.prototype._bindEventListeners=function(){this.$el.find(c.DOWNLOAD_BTN).on("click",a.bind(function(e){var a=t(e.target),n=a.data("format");"pdf"==n?this._downloadMetadata(n):this._downloadData(n)},this))},u.prototype._downloadData=function(t){var e=this.model.data?this.model:{metadata:{uid:this.model.metadata.uid},data:[]},a={resource:e,input:{config:{}},output:{config:{lang:this.box.lang.toUpperCase()}}};this.report.export({format:"table",config:a})},u.prototype._downloadMetadata=function(t){var e=this.model.metadata.title.EN.replace(/[^a-z0-9]/gi,"_").toLowerCase(),a=this.model.metadata.dsd&&this.model.metadata.dsd.contextSystem&&"uneca"===this.model.metadata.dsd.contextSystem?"uneca":"fao",n={resource:{metadata:{uid:this.model.metadata.uid},data:[]},input:{config:{}},output:{config:{template:a,lang:this.box.lang.toUpperCase(),fileName:e+".pdf"}}};this.report.export({format:"metadata",config:n})},u.prototype._renderComponents=function(){},u.prototype._unbindEventListeners=function(){this.$el.find(c.DOWNLOAD_BTN).off()},u.prototype._isSuitable=function(){var t=!0,e=[],a=r.getNestedProperty("metadata.meContent.resourceRepresentationType",this.model);return"dataset"!==a&&e.push({code:i.INCOMPATIBLE_RESOURCE_TYPE}),e.length>0?e:t},u.prototype._dispose=function(){this.ready===!0&&this._unbindEventListeners()},u.prototype._getEventTopic=function(t){return o[t]?o[t]+this.id:t+this.id},u.prototype._setState=function(e,a){Utils.assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){return'<div data-role="download">\n\n    <div class="row">\n        <div class="col-xs-6">\n            <div class="jumbotron text-center">\n\n                <h1>\n                    <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>\n                </h1>\n                <p>Data:</p>\n                <p>\n                <div class="btn-group" role="group" aria-label="...">\n                    <button data-action="download" data-format="xls" type="button" class="btn btn-default">Excel\n                    </button>\n                </div>\n                </p>\n            </div>\n        </div>\n        <div class="col-xs-6">\n            <div class="jumbotron text-center">\n\n                <h1>\n                    <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>\n                </h1>\n                <p>Metadata:</p>\n                <p>\n                <div class="btn-group" role="group" aria-label="...">\n                    <button data-action="download" data-format="pdf" type="button" class="btn btn-default">PDF</button>\n                </div>\n\n                </p>\n            </div>\n        </div>\n\n    </div>\n\n</div>'},useData:!0})},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(28),a(34),a(72),a(62),a(31)],i=function(t,e,a,n,i,o,r,s,l,u,c){"use strict";function d(e){return t.extend(!0,this,h,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id,onReady:e.onReady,values:e.values}),this.channels={},this.state={},this.cache=this.initial.cache,this.lang=this.initial.lang,this}var h={template:{hideFooterButtons:!0}},p={CONTAINER:"[data-role='filter']",SUBMIT_BTN:"[data-role='submit']",RESET_BTN:"[data-role='reset']"};return d.prototype.init=function(){e.info("Tab initialized successfully")},d.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),this.ready=!0,e.info("Tab shown successfully"),this):(e.error("Impossible to create show filter tab"),void e.error(a))},d.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Filter tab: is tab suitable?",t),t===!0||(e.error(t),this._setState("errors",t),!1)},d.prototype.dispose=function(){this._dispose(),e.info("Filter tab disposed successfully")},d.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},d.prototype.sync=function(t){e.info("Sync tab. State:"+JSON.stringify(t)),t.hasOwnProperty("toolbar")&&this.filter?this.filter.setValues(t.toolbar,!0):e.warn("Abort toolbar sync")},d.prototype.setValues=function(t,a){return e.info("Set values. values:"+JSON.stringify(t)),this.filter?this.filter.setValues(t,a):{}},d.prototype.getValues=function(t){return e.info("Get values. format:"+t),this.filter?this.filter.getValues(t):{}},d.prototype.rebuild=function(e){this.initial.config=e.config,this.initial.template=t.extend(!0,{},this.template),this.initial.labels=t.extend(!0,{},this.labels),this.initial.values=t.extend(!0,{},this.getValues(null)),this.dispose(),this.show()},d.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},d.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:i.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},d.prototype._show=function(t){this.initialized===!0?e.info("Tab Filter shown again"):(e.info("Tab Filter shown for the first time"),this.syncModel=t,this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0)},d.prototype._attach=function(){var e=t.extend(!0,{},h.template,this.template,c[this.lang.toLowerCase()],this.labels),a=l(e);this.$el.html(a)},d.prototype._initVariables=function(){this.$submitBtn=this.$el.find(p.SUBMIT_BTN),this.$resetBtn=this.$el.find(p.RESET_BTN),this.config=this.initial.config,this.values=this.initial.values||{},this.labels=this.initial.labels||{},this.template=this.initial.template,this.common=this.initial.common||{}},d.prototype._bindEventListeners=function(){this.$submitBtn.on("click",a.bind(this._onSubmitBtnClick,this)),this.$resetBtn.on("click",a.bind(this._onResetBtnClick,this)),this.filter.on("ready",a.bind(this._onFilterReady,this))},d.prototype._onFilterReady=function(){this.$submitBtn.prop("disabled",!1),this.$resetBtn.prop("disabled",!1),e.info("trigger 'ready' event"),this._trigger("ready"),this.filter.on("change",a.bind(this._onFilterChange,this))},d.prototype._onFilterChange=function(){var t=this.filter.getValues();e.info("trigger 'change' event "+JSON.stringify(t)),this._trigger("change",t)},d.prototype._onSubmitBtnClick=function(){var t=this.filter.getValues();e.info("trigger 'submit' event"+JSON.stringify(t)),this._trigger("submit",t)},d.prototype._onResetBtnClick=function(t){e.info("trigger 'reset' event"),this.filter.reset(),this._trigger("reset")},d.prototype._renderComponents=function(){e.info("render filter");var t={selectors:this._createFilterConfiguration(),el:this.$el.find(p.CONTAINER),cache:this.cache,template:this.template,common:this.common,values:this.values,environment:this.initial.environment,lang:this.lang};this.filter=new u(t)},d.prototype._createFilterConfiguration=function(){var e=this.config?t.extend(!0,{},this.config):s.createConfiguration({model:this.model}),a=t.extend(!0,{},s.mergeConfigurations(e,this.syncModel||{})),n=t.extend(!0,{},s.mergeConfigurations(a,this.values||{}));return n},d.prototype._unbindEventListeners=function(){this.$submitBtn.off(),this.$resetBtn.off()},d.prototype._isSuitable=function(){var t=!0,e=[],a=r.getNestedProperty("metadata.meContent.resourceRepresentationType",this.model);return"dataset"!==a&&e.push({code:i.INCOMPATIBLE_RESOURCE_TYPE}),e.length>0?e:t},d.prototype._dispose=function(){this.ready===!0&&(this._unbindEventListeners(),this.filter.dispose()),this.$el.empty(),this.initialized=!1},d.prototype._getEventTopic=function(t){return o[t]?o[t]+this.id:t+this.id},d.prototype._setState=function(e,a){r.assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},d}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({1:function(t,e,a,n,i){var o,r=null!=e?e:{},s=a.helperMissing,l="function",u=t.escapeExpression;return'    <div class="row">\n        <div class="col-xs-12">\n            <button type="button" data-role="submit" class="btn btn-default" disabled>'+u((o=null!=(o=a.submit_button||(null!=e?e.submit_button:e))?o:s,typeof o===l?o.call(r,{name:"submit_button",hash:{},data:i}):o))+'</button>\n            <button type="button" data-role="reset" class="btn btn-default" disabled>'+u((o=null!=(o=a.reset_button||(null!=e?e.reset_button:e))?o:s,typeof o===l?o.call(r,{name:"reset_button",hash:{},data:i}):o))+"</button>\n        </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o;return'<div data-role="filter"></div>\n\n\n\n'+(null!=(o=a.unless.call(null!=e?e:{},null!=e?e.hideFooterButtons:e,{name:"unless",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?o:"")},useData:!0})},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(74),a(25),a(26),a(27),a(28),a(34),a(75),a(62),a(76),a(77),a(31),a(78),a(48)],i=function(t,e,a,n,i,o,r,s,l,u,c,d,h,p,b,_){function f(e){return t.extend(!0,this,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id}),this.channels={},this.state={},this.cache=this.initial.cache,this.lang=this.initial.lang,this}var g={TOOLBAR:"[data-role='toolbar']",TOOLBAR_BTN:"[data-role='filter-btn']"};return f.prototype.init=function(){e.info("Map initialized successfully")},f.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),e.info("Map tab shown successfully"),this):(e.error("Impossible to create show map tab"),void e.error(a))},f.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Map tab: is tab suitable?",t),t===!0||(e.error(t),this._setState("errors",t),!1)},f.prototype.dispose=function(){this._dispose(),e.info("Map disposed successfully")},f.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},f.prototype.sync=function(t){return e.info("Sync tab. State:"+JSON.stringify(t)),this.syncState=t,this.toSync=!0,this},f.prototype.update=function(t){console.log("UPDATE MAP SETTINGS",t)},f.prototype.redraw=function(){this.map?this.map.invalidateSize():e.warn("Abort redraw")},f.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},f.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:o.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},f.prototype._show=function(t){return this.initialized!==!0?(e.info("Map map shown for the first time"),this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0):e.info("Tab Map shown again"),this.toSync===!0&&(e.info("Sync tab. State:"+JSON.stringify(this.syncState)),this.syncState.hasOwnProperty("toolbar")&&this.toolbar&&this.toolbar.setValues(this.syncState.toolbar,!0),this.syncState.hasOwnProperty("map")&&this.addLayersByFilter(this.syncState.map)),this},f.prototype._attach=function(){var e=u(t.extend(!0,{},this,p));this.$el.html(e)},f.prototype._initVariables=function(){this.$toolbar=this.$el.find(g.TOOLBAR),this.$toolbarBtn=this.$el.find(g.TOOLBAR_BTN)},f.prototype._bindEventListeners=function(){var n=this;_.subscribe(this._getEventTopic("toolbar"),this,this._onToolbarEvent),this.$el.find("[data-action]").each(function(){var a=t(this),i=a.data("action"),o=n._getEventTopic(i);a.on("click",{event:o,tab:n},function(t){t.preventDefault(),e.info("Raise event: "+t.data.event),_.publish(o,{target:this,tab:t.data.tab})})}),this.$toolbarBtn.on("click",a.bind(this._onToolbarBtnClick,this))},f.prototype._onToolbarEvent=function(t){e.info("Listen to event: "+this._getEventTopic("toolbar")),e.trace(t);var a="up"!==this.toolbarPosition?"up":"down",n=this.map.leafletMap,i=n.latLngToContainerPoint(n.getCenter()),o=i;"down"===a?o.x-=200:"up"===a&&(o.x+=200),n.panTo(n.containerPointToLatLng(o)),this._slideToolbar(a)},f.prototype._slideToolbar=function(t){"up"!==t?(this.$toolbar.addClass("in"),this.$toolbarBtn.addClass("in"),this.toolbarPosition="down"):(this.$toolbar.removeClass("in"),this.$toolbarBtn.removeClass("in"),this.toolbarPosition="up"),this._setState("toolbarPosition",this.toolbarPosition)},f.prototype._onToolbarBtnClick=function(){this._onToolbarEvent(),this._renderMap()},f.prototype._renderMap=function(){var t=this;if(i.renderVisualizationComponents===!1)return void e.warn("Render Visualization component blocked by configuration");var n=this.$el.find("#map_"+this.id),o=this.lang?this.lang.toUpperCase():"EN",r={el:n,lang:o,fenix_ui_map:a.extend(h,{guiController:{container:this.$el.find(g.TOOLBAR),wmsLoader:!1}})},l=s.getNestedProperty("metadata.meContent.resourceRepresentationType",t.model);if("dataset"===l)r.model=t.model;else if("geographic"===l){var u=s.getNestedProperty("metadata.dsd.layerName",t.model),c=s.getNestedProperty("metadata.dsd.workspace",t.model);r.uid=c+":"+u}this.map=new b(r),window.MMM=this,this._filterLayers={}},f.prototype.addLayersByFilter=function(t){for(var e in t.values.layers){var a=t.values.layers[e];layerTitle=t.labels.layers[a],this._filterLayers&&!this._filterLayers.hasOwnProperty(a)&&(this._filterLayers[a]=new FM.layer({urlWMS:"http://fenix.fao.org/demo/fenix/geoserver/wms",layers:a,layertitle:"EarthStat Layer: "+layerTitle,opacity:"0.8",layertype:"WMS"}),this.map.fenixMap.addLayer(this._filterLayers[a]))}},f.prototype._createFilterConfiguration=function(){var e=s.getMapToolbarConfig(this.model),a=t.extend(!0,{},d,e),n=t.extend(!0,{},l.mergeConfigurations(a,this.syncState.toolbar||{}));return n},f.prototype._renderToolbar=function(){e.info("Map tab render toolbar");var t=this;this.toolbar=new c({selectors:this._createFilterConfiguration(),el:this.$el.find(g.TOOLBAR),cache:this.cache,environment:this.initial.environment}),this.toolbar.on("ready",a.bind(this._renderMap,this)),this.toolbar.on("select",function(e){console.log("toolbar change",e);var a=t.toolbar.getValues();a.values&&(a.values.map_boundaries[0]?t.map.fenixMap.boundariesShow():t.map.fenixMap.boundariesHide(),a.values.map_labels[0]?t.map.fenixMap.labelsShow():t.map.fenixMap.labelsHide())})},f.prototype._renderComponents=function(){this._renderToolbar();var t=this.initial.toolbarPosition||i.toolbarPosition;"up"===t?this.toolbarPosition="up":this.toolbarPosition="down"},f.prototype._unbindEventListeners=function(){this.$el.find("[data-action]").off(),_.unsubscribe(this._getEventTopic("toolbar"),this._onToolbarEvent)},f.prototype._isSuitable=function(){var t=!0,e=[],n=s.getNestedProperty("metadata.meContent.resourceRepresentationType",this.model);"dataset"!==n&&"geographic"!==n&&e.push({code:o.INCOMPATIBLE_RESOURCE_TYPE});var i=s.getNestedProperty("metadata.dsd.columns",this.model),r=a.findWhere(i,{subject:"geo"});return r||e.push({code:o.MISSING_GEO_COLUMN}),e.length>0?e:t},f.prototype._dispose=function(){this._unbindEventListeners()},f.prototype._getEventTopic=function(t){return r[t]?r[t]+this.id:t+this.id},f.prototype._setState=function(e,a){s.assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},f.prototype._getTestLayer=function(){var t=[["2","Afghanistan","512094.0","tonnes"]],e=a.map(t,function(t){var e={};return e[t[0]]=parseFloat(t[2]),e}),n="areanamee",i="faost_code",o="Tonnes";return new FM.layer({layers:"fenix:gaul0_faostat_3857",layertitle:"Rice Paddy Production 2013",opacity:"0.5",joincolumn:i,joincolumnlabel:n,joindata:e,mu:o,measurementunit:o,layertype:"JOIN",jointype:"shaded",openlegend:!1,defaultgfi:!0,colorramp:"Reds",lang:"en",customgfi:{content:{en:"<div class='fm-popup'>{{"+n+"}} <div class='fm-popup-join-content'>{{{"+i+"}}}</div></div>"},showpopup:!0}})},f}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports=b},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r=null!=e?e:{},s=a.helperMissing,l="function",u=t.escapeExpression;return'<button data-action="toolbar" class="btn btn-floating fx-background-color-primary-color btn-fx-toolbar" type="button" title="'+u((o=null!=(o=a.tooltip_toolbar_button||(null!=e?e.tooltip_toolbar_button:e))?o:s,typeof o===l?o.call(r,{name:"tooltip_toolbar_button",hash:{},data:i}):o))+'"><span class="icojam_options2"></span></button>\n<button data-role="filter-btn" class="btn btn-floating btn-fx-toolbar-confirm" type="button"><span class="icojam_check"></span></button>\n\n<div data-role="toolbar" class="col-xs-12 col-sm-6 col-md-6"></div>\n\n<div class="tab-item-content-wrapper">\n    <div id="map_'+u((o=null!=(o=a.id||(null!=e?e.id:e))?o:s,typeof o===l?o.call(r,{name:"id",hash:{},data:i}):o))+'" class="tab-item-content"></div>\n</div>'},useData:!0})},function(t,e,a){var n,i;n=[a(29),a(67)],i=function(t,e){"use strict";return{map_boundaries:{selector:{id:"input",type:"checkbox",source:[{value:!0,label:"Show Map Boundaries"}]}},map_labels:{selector:{id:"input",type:"checkbox",source:[{value:!0,label:"Show Map Labels"}]}}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){!(t.exports={lang:"en",plugins:{fullscreen:!0,scalecontrol:"bottomleft"},guiController:{container:"",wmsLoader:!1},baselayers:{cartodb:{title_en:"CartoDB light",title_fr:"CartoDB light",url:"http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",subdomains:"abcd",maxZoom:19},osm:{url:"http://{s}.tiles.wmflabs.org/osm-no-labels/{z}/{x}/{y}.png",title_en:"Openstreetmap",title_fr:"Openstreetmap",maxZoom:16},world_imagery:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",title_en:"World Imagery",title_fr:"World Imagery"}},legendOptions:{fontColor:"0x000000",fontSize:"12",bgColor:"0xFFFFFF"}})},function(t,e){t.exports=_},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(28),a(80),a(35)],i=function(t,e,a,n,i,o,r,s,l){"use strict";function u(e){return t.extend(!0,this,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id}),this.channels={},this.state={},this.cache=this.initial.cache,this.lang=this.initial.lang,this.environment=this.initial.environment,this}return u.prototype.init=function(){e.info("Tab initialized successfully")},u.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),this.ready=!0,e.info("trigger 'ready' event"),this._trigger("ready"),e.info("Tab shown successfully"),this):(e.error("Impossible to create show metadata tab"),void e.error(a))},u.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Metadata tab: is tab suitable?",t),t===!0||(e.error(t),this._setState("errors",t),!1)},u.prototype.dispose=function(){this._dispose(),e.info("Metadata tab disposed successfully")},u.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},u.prototype.sync=function(t){e.info("Sync tab. State:"+JSON.stringify(t)),t.hasOwnProperty("toolbar")&&this.toolbar?this.toolbar.setValues(t.toolbar,!0):e.warn("Abort toolbar sync")},u.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},u.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:i.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},u.prototype._show=function(t){this.initialized===!0?e.info("Tab Metadata shown again"):(e.info("Tab Metadata shown for the first time"),this.syncModel=t,this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0)},u.prototype._attach=function(){var t=s(this);this.$el.html(t)},u.prototype._initVariables=function(){},u.prototype._bindEventListeners=function(){},u.prototype._renderComponents=function(){e.info("Render metadata viewer"),this.metadataViewer=new l({model:this.model.metadata,cache:this.cache,environment:this.environment,lang:this.lang,el:this.$el.find("#metadata_"+this.id)})},u.prototype._unbindEventListeners=function(){},u.prototype._isSuitable=function(){var t=!0,e=[];return e.length>0?e:t},u.prototype._dispose=function(){this.ready===!0&&(this._unbindEventListeners(),this.metadataViewer.dispose())},u.prototype._getEventTopic=function(t){return o[t]?o[t]+this.id:t+this.id},u.prototype._setState=function(e,a){r.assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r,s=t.escapeExpression;return'<div class="tab-item-content-wrapper">\n\n    <div id="metadata_'+s((r=null!=(r=a.id||(null!=e?e.id:e))?r:a.helperMissing,"function"==typeof r?r.call(null!=e?e:{},{name:"id",hash:{},data:i}):r))+'" class="tab-item-content" data-resourceRepresentationType=\''+s(t.lambda(null!=(o=null!=(o=null!=(o=null!=e?e.model:e)?o.metadata:o)?o.meContent:o)?o.resourceRepresentationType:o,e))+"'></div>\n</div>\n\n"},useData:!0})},function(t,e,a){var n,i;n=[a(29),a(22),a(23),a(25),a(26),a(27),a(28),a(34),a(82),a(62),a(83),a(31),a(84),a(48)],i=function(t,e,a,n,i,o,r,s,l,u,c,d,h,p){"use strict";function b(e){return t.extend(!0,this,{initial:e,$el:t(e.el),box:e.box,model:e.model,id:e.id}),this.channels={},this.state={},this.cache=this.initial.cache,this.lang=this.initial.lang,this}var _={TOOLBAR:"[data-role='toolbar']",FILTER_BTN:"[data-role='filter-btn']"};return b.prototype.init=function(){e.info("Tab initialized successfully")},b.prototype.show=function(t){var a=this._validateInput();return a===!0?(this._show(t),e.info("Tab shown successfully"),this):(e.error("Impossible to create show table tab"),void e.error(a))},b.prototype.isSuitable=function(){var t=this._isSuitable();return e.info("Table tab: is tab suitable?",t),t===!0||(e.error(t),this._setState("errors",t),!1)},b.prototype.dispose=function(){this._dispose(),e.info("Table tab disposed successfully")},b.prototype.on=function(t,e,a){var n=a||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:n,callback:e}),this},b.prototype.sync=function(t){return e.info("Sync tab. State:"+JSON.stringify(t)),this.syncState=t,this.toSync=!0,this},b.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),a=0,n=this.channels[t].length;a<n;a++){var i=this.channels[t][a];i.callback.apply(i.context,e)}return this},b.prototype._validateInput=function(){var t=!0,a=[];return 0===this.$el.length&&(a.push({code:i.MISSING_CONTAINER}),e.warn("Impossible to find tab container")),a.length>0?a:t},b.prototype._show=function(t){return this.initialized!==!0?(e.info("Tab table shown for the first time"),this._attach(),this._initVariables(),this._renderComponents(),this._bindEventListeners(),this.initialized=!0):e.info("Tab table shown again"),this.toSync===!0&&(e.info("Sync tab. State:"+JSON.stringify(this.syncState)),this.syncState.hasOwnProperty("toolbar")&&this.toolbar&&(this.toolbar.setValues(this.syncState.toolbar,!0),this._renderTable())),this},b.prototype._attach=function(){var e=l(t.extend(!0,{},this,d[this.lang.toLowerCase()]));this.$el.html(e)},b.prototype._initVariables=function(){this.$toolbar=this.$el.find(_.TOOLBAR),this.$toolbarBtn=this.$el.find(_.FILTER_BTN)},b.prototype._bindEventListeners=function(){var i=this;p.subscribe(this._getEventTopic("toolbar"),this,this._onToolbarEvent),this.$el.find("[data-action]").each(function(){var a=t(this),n=a.data("action"),o=i._getEventTopic(n);a.on("click",{event:o,tab:i},function(t){t.preventDefault(),e.info("Raise event: "+t.data.event),p.publish(o,{target:this,tab:t.data.tab})})}),this.$toolbarBtn.on("click",a.bind(this._onToolbarBtnClick,this)),n.syncTabsOnToolbarChange===!0&&this.toolbar.on("change",a.bind(this._onToolbarChangeEvent,this)),this.$el.find('[data-toggle="tooltip"]').tooltip()},b.prototype._onToolbarEvent=function(t){e.info("Listen to event: "+this._getEventTopic("toolbar")),e.trace(t);var a="up"!==this.toolbarPosition?"up":"down";this._slideToolbar(a)},b.prototype._slideToolbar=function(t){"up"!==t?(this.$toolbar.addClass("in"),this.$toolbarBtn.addClass("in"),this.toolbarPosition="down"):(this.$toolbar.removeClass("in"),this.$toolbarBtn.removeClass("in"),this.toolbarPosition="up"),this._setState("toolbarPosition",this.toolbarPosition)},b.prototype._onToolbarBtnClick=function(){this._onToolbarEvent(),this._onConfigurationChange()},b.prototype._renderTable=function(){var a=this.toolbar.getValues(),i=r.getTableCreatorConfiguration(a);if(n.renderVisualizationComponents===!1)return void e.warn("Render Visualization component blocked by configuration");var o=t.extend(!0,{},{model:this.model,el:"#table_"+this.id,lang:this.lang.toUpperCase()},i);this.table=new h(o)},b.prototype._renderToolbar=function(){e.info("Table tab render toolbar");var t=this,n={selectors:this._createFilterConfiguration(c),cache:this.cache,el:this.$el.find(_.TOOLBAR),environment:this.initial.environment},i={};n.selectors.hasOwnProperty("dimensionsSort")&&(a.each(n.selectors.dimensionsSort.selector.config.groups,function(e,a){i[a]=d[t.lang.toLowerCase()]["tab_table_toolbar_"+a]}),n.selectors.dimensionsSort.selector.config.groups=i);var o=r.getNestedProperty("selectors.show.selector.source",n);a.map(o,function(e){return e.label=d[t.lang.toLowerCase()]["tab_table_toolbar_"+e.value]||e.label,e}),r.assign(n,"selectors.show.selector.source",o),this.toolbar=new u(n),this.toolbar.on("ready",a.bind(this._renderTable,this))},b.prototype._createFilterConfiguration=function(){e.info("Create toolbar config");var n,i,o,l=this;return n=r.getTableToolbarConfig(this.model,{lang:this.lang.toUpperCase()}),e.info(n),i=t.extend(!0,{},c,n),e.info(i),o=t.extend(!0,{},s.mergeConfigurations(i,this.syncState.toolbar||{})),a.each(o,a.bind(function(t,e){t.template.title=d[l.lang.toLowerCase()]["tab_table_toolbar_"+e]},this)),e.info(o),o},b.prototype._onToolbarChangeEvent=function(){this._onConfigurationChange()},b.prototype._onConfigurationChange=function(){this._trigger("filter",this.toolbar.getValues()),this._renderTable()},b.prototype._renderComponents=function(){this._renderToolbar();var t=this.initial.toolbarPosition||n.toolbarPosition;"up"===t?this.toolbarPosition="up":this.toolbarPosition="down"},b.prototype._unbindEventListeners=function(){this.$toolbarBtn.off(),this.$el.find("[data-action]").off(),p.unsubscribe(this._getEventTopic("toolbar"),this._onToolbarEvent)},b.prototype._isSuitable=function(){
var t=!0,e=[],a=r.getNestedProperty("metadata.meContent.resourceRepresentationType",this.model);return"dataset"!==a&&e.push({code:i.INCOMPATIBLE_RESOURCE_TYPE}),e.length>0?e:t},b.prototype._dispose=function(){this.state.ready===!0&&this._unbindEventListeners()},b.prototype._getEventTopic=function(t){return o[t]?o[t]+this.id:t+this.id},b.prototype._setState=function(e,a){r.assign(this.state,e,a),this._trigger("state",t.extend(!0,{},this.state))},b}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,a,n,i){var o,r=null!=e?e:{},s=a.helperMissing,l="function",u=t.escapeExpression;return'<button data-action="toolbar" class="btn btn-floating fx-background-color-primary-color btn-fx-toolbar" type="button" title="'+u((o=null!=(o=a.tooltip_toolbar_button||(null!=e?e.tooltip_toolbar_button:e))?o:s,typeof o===l?o.call(r,{name:"tooltip_toolbar_button",hash:{},data:i}):o))+'"><span class="icojam_options2"></span></button>\n<button data-role="filter-btn" class="btn btn-floating btn-fx-toolbar-confirm" type="button"><span class="icojam_check"></span></button>\n\n<div data-role="toolbar" class="col-xs-12 col-sm-6 col-md-6">\n    <div data-selector="dimensionsSort"></div>\n</div>\n\n<div class="tab-item-content-wrapper">\n\t<div id="table_'+u((o=null!=(o=a.id||(null!=e?e.id:e))?o:s,typeof o===l?o.call(r,{name:"id",hash:{},data:i}):o))+'" class="tab-item-content"></div>\n</div>'},useData:!0})},function(t,e,a){var n,i;n=[a(29),a(67)],i=function(t,e){"use strict";return t.extend(!0,{},e,{show:{selector:{id:"input",type:"checkbox",source:[{value:"unit",label:"Unit"},{value:"flag",label:"Flag"},{value:"code",label:"Code"}]},template:{title:"Show"}}})}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports=f}])});
//# sourceMappingURL=fenix-ui-visualization-box.min.js.map