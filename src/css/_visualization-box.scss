/* Visualization Box Style */

$box-height: 450px; // 430px content + 23px toolbar height + 1px border between vb-toolbar and content (the border affects the dimensions because of the nature of the h6 title inside)
$back-and-border-color: #e0e0e0; // $fenix-light-gray
$box-content-height: 424px; // 450px minus the 23px vb-toolbar
$detail-height: 350px;
$sidebar-process-container-height: 360px;
$toolbar-font-size: 11px;
$cmd-left-width: 85px;
$cmd-right-width: 192px;


.fx-box {
  height: $box-height;
  border: 1px solid $back-and-border-color;


  [data-content] {
    display: none;
    height: $box-height;
    position: relative;

    .loading{
      position: absolute;
      top: 45%;

    }

  }

  .front-content, .back-content{
    height: $box-content-height;

  }




  /* Hovered */

  .box-title {
    margin-left: $cmd-left-width;
    margin-right: $cmd-right-width;
  }

  .toolbar-cmd-left, .toolbar-cmd-right{
    opacity:1;
    pointer-events: auto;
  }



  @media screen and (min-width: $screen-sm) {

    &{
      .toolbar-cmd-left, .toolbar-cmd-right{
        opacity:0;
        pointer-events: none;
        @include animate(0.3s, 0.2s);
      }


      .box-title {
        margin-left: 15px;
        margin-right: 15px;
        @include animate(0.3s, 0.2s);
      }


    }

    &:hover{
      .toolbar-cmd-left, .toolbar-cmd-right{
        opacity:1;
        pointer-events: auto;
      }

      .box-title {
        margin-left: $cmd-left-width;
        margin-right: $cmd-right-width;
      }


    }




  }

  @media screen and (min-width: $screen-md) {

  }
  @media screen and (min-width: $screen-lg) {

  }







  //show only the status only correspondent tab content
  $statuses: "ready" "error" "loading" "empty";

  @each $status in $statuses {

    &[data-status="#{$status}"] {

      [data-content="#{$status}"] {
        display: block;

      }
    }
  }


  [data-content="ready"] {

    [data-section] {
      display: none;
    }

    //show only the selected tab
    $sections: "chart" "table" "map" "blank" "metadata" "download";

    @each $sec in $sections {

      &[data-tab="#{$sec}"] {

        [data-section="#{$sec}"] {
          display: block;

        }
      }
    }
  }
}


.vb-toolbar{

  background-color: white;
  border-bottom: 1px solid $back-and-border-color;

  .meta-btn{
    margin-top:2px ;
  }


  .toolbar-cmd-left{
    width: $cmd-left-width;
    position: absolute;
    top: 0;
    left: 0;
  }

  .toolbar-cmd-right{
    width: $cmd-right-width;
    position: absolute;
    top: 0;
    right: 0;
    text-align: right;
    font-size: 0; /* Avoid space between elements with display inline */

    button{
      float: none; /* Avoid 1px bug on the right in md resolution */
      margin-left: 0 !important; /* Avoid 1px bug of the bootstrap's btn-group */
      display: inline-block;


      &[data-action="flip"]{
        background-color: $back-and-border-color;
      }

      &:last-child{
        margin-right: 0; /* Remove margin from the last child of btn-group */
      }

    }

  }



  button{
    border: 0;
    background-color: transparent ;
    font-size: 16px;
    padding: 1px 10px 0 10px;
    @include fx-no-border-radius;



    &.active, &:active{


    }

    &.focus, &:focus{

    }


    &[disabled]{
      background-color: transparent ;
      border: 0;
      opacity: 1;

      span{
        opacity: 0.35;
      }

    }

    &:hover{
      border: 0;
      border-color: transparent;
      background-color: $back-and-border-color;
      color: $fx-cool-blue;


    }

    
  }


  .box-title {
    color: $fx-cool-blue;
    margin-top: 5px;
    margin-bottom: 5px;

  }


}





/*Flip effect */
/* entire container, keeps perspective */
.flip-container {
  perspective: 1000;
  height: $box-height;
}
/* flip the pane when hovered*/
.flip-container.flipped .flipper {
  transform: rotateY(180deg);
}


/* flip speed goes here */
.flipper {
  transition: 0.6s;
  transform-style: preserve-3d;
  height: 100%;
  position: relative;
}

/* hide back of pane during swap */
.front, .back {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
}



/* FRONT pane, placed above back */
.front {
  z-index: 2;
  /* for firefox 31 */
  transform: rotateY(0deg);
  background-color: white;
  //border: 1px solid $back-and-border-color;
}

[data-role="toolbar"] {
  z-index: 1;
  position : absolute;
  background-color: white;
}

[data-section] {
  position : relative;

}






/* BACK, initially hidden pane */
.back {
  transform: rotateY(180deg);
  background-color: $back-and-border-color;
  //border: 1px solid $back-and-border-color;
}

[data-role="back-content"]{
  height:100%;
}

.process-details{
  height: $detail-height;
  overflow-x: hidden;
  overflow-y: auto;
}

.show-back-sidebar{
  position: absolute;
  z-index: 2;
  top: 15px;
  left: 15px;
}

.sidebar-title{
  color: $fenix-secondary-text;
  padding: 0 15px;
  border-bottom: 1px solid $back-and-border-color;
  padding-bottom: 10px;
}


.filter-slide{
  width: 250px !important;
}

.back-right-content{
  height: 100%;
  padding-top: 15px;
}

.swiper-container, .swiper-slide {
  width: 100%;
  height: $detail-height;
}

.back-row {
  position : relative;
  height: 100%;
}

[data-role='back-sidebar'] {
  z-index: 1;
  height: 100%;
  position: absolute;

  .sidebar-content{
    background-color: white;
    height: calc(100% - 30px);
    width: calc(100% - 30px);
    position : absolute;
    top: 15px;
    left: 15px;

    .process-steps-container{
      padding: 5px 15px;
      position: absolute;
      bottom: 0;
      height: $sidebar-process-container-height;
      width: 100%;
      overflow-x: hidden;
      overflow-y: scroll;
    }

  }



  @media screen and (max-width: $screen-xs) {

  }

  @media screen and (min-width: $screen-sm) {
    position : absolute;
  }

  @media screen and (min-width: $screen-md) {
    position : relative;

  }

  @media screen and (min-width: $screen-lg) {
    position : relative;
  }



}

[data-tab].active {
  //.step-container{
  //  background-color: #fd433c;
  //  color: white;
  //}
}


.step-container{
  padding: 5px 10px;
  margin: 7px 0;
  cursor: pointer;
  background-color: $back-and-border-color;
  position: relative;

  .step-title{
    font-weight: normal;
    margin: 2px 0;
    margin-left: 23px;
    color: white;
  }

  .step-icon{

    display: inline-block;
    position: absolute;
    height: 100%;
    width: 29px;
    background-color: #333;
    top: 0;
    left: 0;
    color: white;


    &:before{
      font-size: 20px;
      position: relative;
      top: 3px;
      left: 5px;
    }

  }

  &.active{

    &:before{
      content: '';
      position: absolute;
      right: 0;
      bottom: 0;
      z-index: 1;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 0 0 8px 8px;
      border-color: transparent transparent $fenix-text transparent;
      line-height: 0px;
      _border-color: #000000 #000000 $fenix-text #000000;
      _filter: progid:DXImageTransform.Microsoft.Chroma(color='#000000');
    }
  }



}

[data-resourcerepresentationtype].step-container{
  background-color: #fd433c;


  .step-icon{
    background-color: #b02f2a;
  }
}



/*TODO temporary*/
[data-role="toolbar"] {
  height: 615px;
}





